<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="jfds ifd ewrerw iok.">
<meta property="og:type" content="website">
<meta property="og:title" content="Johnson&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Johnson&#39;s Blog">
<meta property="og:description" content="jfds ifd ewrerw iok.">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Johnson&#39;s Blog">
<meta name="twitter:description" content="jfds ifd ewrerw iok.">





  
  
  <link rel="canonical" href="http://yoursite.com/page/2/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Johnson's Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Johnson's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/04/2017-01-09-wechat-miniapp-ux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/04/2017-01-09-wechat-miniapp-ux/" class="post-title-link" itemprop="url">如何客观地评价「小程序」的体验?</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-04 11:56:32" itemprop="dateCreated datePublished" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
            </span>
          

          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>本文首发于我的知乎专栏 <a href="https://zhuanlan.zhihu.com/p/24782839" target="_blank" rel="noopener">The Little Programmer</a>，转载请保留链接 ;)</p>
</blockquote>
<p>2017 年 1 月 9 号凌晨，看完《星战》回家，发现朋友圈都炸了……原来是「小程序」如约公测（以下简称小程序）。果然贵圈人都睡得晚啊，一个个大半夜了精神得不行。</p>
<p>截图推荐什么的已经漫天都是了，而且连 「推荐小程序的小程序」都已经出现了，我们就直入正题吧，今天笔者不跟你们聊情怀，就聊体验：</p>
<h3 id="小程序的体验比-Web-更好吗？"><a href="#小程序的体验比-Web-更好吗？" class="headerlink" title="小程序的体验比 Web 更好吗？"></a><strong>小程序的体验比 Web 更好吗？</strong></h3><p>体验完利益相关微票儿的「电影演出赛事」后，我在朋友圈里怒发了一条「实际体验小程序的感觉就是<strong>完全没有</strong>比普通的 web 体验更好…」，感觉评论里 <a href="//www.zhihu.com/people/11b8c6f61424152bd0e6d8a97760df16">@Cheeeee</a> 都受惊了 &gt; &lt;。不过在多体验了几个小程序之后，我觉得我应该尝试更客观的回答这个问题。</p>
<h3 id="1-在「微信」里，小程序的-Engagement-比-Web-更好。"><a href="#1-在「微信」里，小程序的-Engagement-比-Web-更好。" class="headerlink" title="1. 在「微信」里，小程序的 Engagement 比 Web 更好。"></a>1. 在「微信」里，小程序的 Engagement 比 Web 更好。</h3><p>这当然是毋庸置疑的，我的博客在微信里打开至今都是「非微信官方网页，继续访问将转换成手机预览模式」，然后点击「继续访问」就是「params is error」，我 &amp;^*#.%…</p>
<p>而对于其他在微信中可访问的 web 应用来说，小程序有着自己的搜索入口、抽屉（历史记录），还可以「显示在聊天顶部」，这其实分别对应着 「拉新」、「包活」 与一定的「多任务」支持。尤其是后两者，与 <a href="https://www.zhihu.com/question/46690207/answer/104851767" target="_blank" rel="noopener">PWA</a> 的「添加至主屏」与「出现在 Task Switcher」里异曲同工。</p>
<p>正如 <a href="https://www.zhihu.com/question/54148303/answer/138152983" target="_blank" rel="noopener">微信小程序和网页版程序的区别在哪里？ - 冯雨的回答 - 知乎</a> 里所说的，「订阅号、服务号、小程序，就是一个个静态或动态的 Web站点；二维码和消息气泡，一个现实一个虚拟，就是微信提供的超级链接。」</p>
<p><strong>World Wide Web 在微信里是残废的，取而代之的是 Weixin/Wechat Wide Web。</strong></p>
<p>值得一提的是，现在微信只会对特定小程序支持模糊搜索，而且据我目测都是诸如京东、滴滴这样的「国家队」。喏，在我地盘这你就得听我的~ ? ?</p>
<h3 id="2-在「微信」里，小程序的-Capability-比-Web-更好。"><a href="#2-在「微信」里，小程序的-Capability-比-Web-更好。" class="headerlink" title="2. 在「微信」里，小程序的 Capability 比 Web 更好。"></a>2. 在「微信」里，小程序的 Capability 比 Web 更好。</h3><p>当我们在说「小程序的体验是否能比 Web 更接近原生应用」时，我们通常指的就是它的 capability。</p>
<p>先说 UI 性能，截止目前为止，小程序的大部分组件都还是使用 WebView 渲染的，这意味着在大多数组件场景下，小程序的 UI 性能不可能比 Web 更高。但是：</p>
<ol>
<li><p><strong>小程序团队非常 tricky 地把力气都用在了刀刃上</strong>：每一个使用原生 UI 渲染、或在自定义 WebView 中优化过的组件都对应着 Mobile Web 中的一个老大难问题。比如在 iOS 上让顶部或底部的 Tab Bar “Fixed”，比如视频的自动播放与控制力，比如地图、textarea 等，可以说利用有限的资源显著提高了小程序的可用性。</p>
</li>
<li><p>由于 Web 前端开发者的良莠不齐，小程序通过限定一组 Web 技术的子集，可以很好的约束开发者写出性能与体验不低于基线的代码，这与 Google 的 AMP 异曲同工。（其实这是大家觉得小程序体验比 Web 好的很大一个原因）  </p>
</li>
<li><p>由于小程序中的 wxml 与 wxss 都是比较 high-level 的抽象，所以微信团队可以在不影响开发者源代码的情况下，通过升级 Runtime 与组件的实现不断优化小程序的性能，比如完全迁移到类似 React Native 或 Weex 这样的 JS-to-Native 方案。</p>
</li>
</ol>
<p>再说启动性能，这是让大家觉得小程序感知体验比 Web 好的第二个大因素：</p>
<ol>
<li>由于小程序是打包部署并「安装」的，可以从文件系统中直接启动。以此解决 web 带来的网络延迟与离线时不可访问问题。</li>
</ol>
<p>最后是 Integration。通过私有的 JS SDK，小程序可以借助微信这座桥梁实现很多以往 Web 并不容易实现的体验。同样，这些改进也非常 tricky，只解决痛点问题：</p>
<ol>
<li>设备访问能力，文件、系统、网络、GPS、加速计、罗盘……</li>
<li>「第一公民」能力，最明显的莫过于设置导航条和页与页之间的动画。还有 Android 设备上的「添加小程序到桌面」，其实就是个快捷方式。</li>
</ol>
<p><img src="/img/in-post/post-wmu/maoyan.jpg" alt></p>
<p>（图为猫眼 App 与小程序，因为长得像…感觉不小心给老东家竞争对手打广告了?）  </p>
<p><strong>可惜的是，这些技术里面没有一项是「小程序」首创的，且大都有超过两年的历史：</strong>百度的 Blend UI、阿里的 Hybrid 容器、Google 的 PWA/AMP、Phonegap/Cordova、React Native/Weex……这也是很多技术从业人吐槽小程序在技术上毫无创新的原因。</p>
<p>但平心而论，崇尚「技术服务产品」的腾讯系在产品化上做的真心出色。这也是我为什么在 9 月 21 日知道小程序技术方案时夸赞「兼容并蓄 博采众长 且可持续性发展」的原因，并不是站在技术创新的角度，而是站在微信的角度上，这个决策拿捏在了 sweet point 上。</p>
<h3 id="3-在「微信」里，小程序不一定比-Web-更好的。"><a href="#3-在「微信」里，小程序不一定比-Web-更好的。" class="headerlink" title="3. 在「微信」里，小程序不一定比 Web 更好的。"></a>3. 在「微信」里，小程序不一定比 Web 更好的。</h3><p>目前我所了解到的（截止 2017 年 1 月 9 日）：</p>
<ol>
<li><p>小程序对比 Web，只能通过摄像头扫码，不能分享朋友圈，营销难做，这是 Reach。  </p>
</li>
<li><p>小程序中没有真正的超链接与 WebView，完全不能外链，这是 Linkability。如果知乎要做小程序，所有答案里的超链接都只能报废。或者只能像轻芒杂志那样，做一层转码，美其名曰阅读模式。</p>
</li>
<li><p>小程序目前的组件虽然 cover 了大部分场景，但是也明显有很多不能 cover 到的 case，这是 Scalability。</p>
</li>
</ol>
<p>这三点都是可以直接影响到目前小程序的产品形态与设计的。当然，对于微信来说，这三点更多的是决策问题。作为 Weixin Wide Web 这个封闭生态的唯一「浏览器」，微信便是生杀大权。手起刀落之间，小程序的缺点随时可以被弥补，而 Web 的优点也随时可以被抹杀。</p>
<p>但是，现实可能并不会这么简单。我们发现，大部分小程序都只提供了其原生应用或 web 应用功能的一个子集。比如文章最早提到的微票儿的「电影演出赛事」小程序，与钱包里的 web 版本相比，UI 体验好了一点，但是功能远没有 web 版本来得丰富，也没有了 web 版本可以分享评论到朋友圈的能力。</p>
<p><img src="/img/in-post/post-wmu/wepiao.jpg" alt></p>
<p>（微票儿小程序与其钱包中的内嵌 web 应用对比，web 版的功能要丰富得多。)</p>
<p>微票儿（娱票儿）作为一家在微信里内嵌 web 服务起家的公司，一是证明了微信流量红利的可怕，二其实也证明了原有 web 的能力。作为「亲腾讯亲微信」的公司之一，其小程序比不上 web 应用可能只是时间关系。但是对于其他公司呢，尤其是未被腾讯「临幸」过的公司？而这其实对应着另一个更难回答的问题：</p>
<h3 id="小程序值得接入商花多大的力气？"><a href="#小程序值得接入商花多大的力气？" class="headerlink" title="小程序值得接入商花多大的力气？"></a><strong>小程序值得接入商花多大的力气？</strong></h3><p>笔者自知无法回答这个问题，所以只能抛砖引玉一下：</p>
<table>
<thead>
<tr>
<th>N/A</th>
<th>简单体验（页面）</th>
<th>中等体验（mini-app）</th>
<th>核心体验（app）</th>
</tr>
</thead>
<tbody><tr>
<td>纯微信流</td>
<td>公众号 小程序</td>
<td>小程序</td>
<td>我想要个原生啊</td>
</tr>
<tr>
<td>创业公司</td>
<td>公众号 Web 小程序</td>
<td>Web 小程序</td>
<td>拉回原生啊</td>
</tr>
<tr>
<td>中大公司</td>
<td>公众号 Web 小程序</td>
<td>Web 小程序</td>
<td>拉回原生啊</td>
</tr>
<tr>
<td>巨头公司</td>
<td>公众号 Web</td>
<td>不跟微信玩</td>
<td>不跟微信玩</td>
</tr>
</tbody></table>
<p>具体到每一个 Web 与小程序 PK 的场景：</p>
<ul>
<li>对于简单体验，小程序的一点点体验提升对比 Web 的跨平台与传播能力没有优势</li>
<li>对于中等体验，小程序体验更好，但需要付出额外的人力资源与开发维护成本</li>
<li>对于核心体验，大家的目标都是拉回自己的主场</li>
</ul>
<p>如果说阿里的「让天下没有难做的生意」是把话说开来「双赢」，微信「开放」平台和接入商之间的资源互换关系则更像是「权力的游戏」了：<strong>微信想借接入商来建立自己的垄断帝国，接入商却想玩暗度陈仓。</strong>某种程度上来说，Web 应用是自己的领地，值得在上面建立完整的体验。而小程序，可能会如小程序诞生前的「weixin-specific web」一样，很大程度上沦为拉新立牌坊的工具。</p>
<p>所以我们不妨再加一条：</p>
<p>4. 对于用户来说，小程序可能并不会「够用」，这是 Feature Set。</p>
<h3 id="4-不在「微信」里，小程序……"><a href="#4-不在「微信」里，小程序……" class="headerlink" title="4. 不在「微信」里，小程序……"></a>4. 不在「微信」里，小程序……</h3><p><img src="/img/in-post/post-wmu/question.jpg" alt></p>
<h3 id="5-结论？"><a href="#5-结论？" class="headerlink" title="5. 结论？"></a>5. 结论？</h3><p>回到问题「小程序的体验比 Web 更好吗？」，我觉得各位看官心里应该会有自己的答案。对于不同的公司，不同的业务场景，不同的盈利方式，不同的团队，我相信这个答案都是不一样的。</p>
<blockquote>
<p>But if you trade something off, make sure you get something in return.<br>如果你需要妥协掉一些东西，请务必换回点好处来。</p>
</blockquote>
<p>作为一篇「试图做到客观（且非常难）」的文章，如果能对你有帮助，那就算没有白写了。</p>
<h3 id="6-题外话（这段主观！）"><a href="#6-题外话（这段主观！）" class="headerlink" title="6. 题外话（这段主观！）"></a>6. 题外话（这段主观！）</h3><p>最后说两句题外话吧，上个月给《程序员》杂志交了拖了 N 久的稿，大概在本月底会发吧？</p>
<p>在那篇文章最后我写到，「笔者奢望着本文能对推动 PWA 的国内环境有一定的贡献」。眼见小程序在某种意义上 “polyfill” （大雾）了 PWA，作为一个在技术上略有 <a href="https://zhuanlan.zhihu.com/p/22561084" target="_blank" rel="noopener">理想主义</a> 的程序员，笔者也只能叹一句了：</p>
<p>「这不是我想要的未来。」</p>
<p>会是你们的吗?</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/04/2016-09-22-the-open-web/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/04/2016-09-22-the-open-web/" class="post-title-link" itemprop="url">Web 在继续离我们远去</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-04 11:56:32" itemprop="dateCreated datePublished" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
            </span>
          

          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>本文首发于我的知乎专栏 <a href="https://zhuanlan.zhihu.com/p/22561084" target="_blank" rel="noopener">The Little Programmer</a>，转载请保留链接 ;)</p>
</blockquote>
<p>今天微信又刷爆了我的朋友圈 —— 小程序，之前传说的应用号。</p>
<p>不过这篇不谈小程序的技术细节，也不去猜测（因为知道得很清楚……），</p>
<p>也不谈小程序会对中国互联网带来什么影响（自有产品经理会来谈……），</p>
<p>我们说说 Web，the Web。</p>
<p>我们常说的 Web，其实是 World Wide Web 的简称 the Web 的简称。</p>
<p>跟 H5 一样，这货是个简称的简称，所以简到最后就没人知道它本身是个什么意思了。</p>
<p>不要说中国老百姓分不清万维网和互联网了，美国老百姓也一样分不清 Web 和 Internet，</p>
<p>很多不求甚解的从业人士也好不到哪去，Web 常年在技术文章中被翻译得不知所云。</p>
<p>中文世界里把这件事讲得最清楚也最在乎的，非 <a href="//www.zhihu.com/people/6bec872206d9884cd9535841b6a1f510">@不鳥萬如一</a> 莫属了。</p>
<p>比如在<a href="https://zhuanlan.zhihu.com/p/20747514" target="_blank" rel="noopener">《一天世界》博客：微信并不是在「管理」外部链接，因为微信公众号在事实上（de facto）不允许任何外部链接 - 不鳥萬通讯 - 知乎专栏</a> 里他写到：</p>
<blockquote>
<p>中文世界一直混淆<a href="https://en.wikipedia.org/wiki/Internet" target="_blank" rel="noopener">互联网</a>（internet）和<a href="https://en.wikipedia.org/wiki/World_Wide_Web" target="_blank" rel="noopener">万维网</a>（web）。人们念兹在兹的「互联网开放精神」，实乃万维网的开放精神。万维网的开放主要就体现在一点：<strong>任何万维网上的文章之间都可以通过网址随意互相链接</strong>。如果我想在文章里介绍 UbuWeb 这个网站，我就可以直接在 <a href="https://ubu.com/" target="_blank" rel="noopener">UbuWeb</a> 这六个字母上添加它的网址 ubu.com。妳或许觉得这是废话，但在微信公众号的文章里妳做不到；妳只能添加微信生态圈内的链接，比如这个：<a href="https://weixin.qq.com/cgi-bin/readtemplate%3Ft%3Dweixin_external_links_content_management_specification" target="_blank" rel="noopener">https://weixin.qq.com/cgi-bin/readtemplate?t=weixin_external_links_content_management_specification</a>（即上述《规范》的链接）</p>
</blockquote>
<p>所以如一卸了微信（ <a href="https://blog.yitianshijie.net/2016/02/21/byebye-wechat/" target="_blank" rel="noopener">告别微信 一天世界</a> ）还写了：<a href="https://blog.yitianshijie.net/2015/11/16/wechat-de-facto-lan/" target="_blank" rel="noopener">微信——事实上的局域网</a> ，嗯，作为一个愈发对 Open Web 这件事 hardcore 的人来说，我是认同的。</p>
<p>如一最在乎的可能是文章，而我更在乎的是应用，Web App。</p>
<p>所谓 Web App，是 Web 的一种进化：从提供文本信息（超文本）到多媒体（超媒体）到提供软件应用服务。硬核的翻译过来大概是“基于万维网的应用”，比如你在 Web 浏览器中使用的 Youtube、Twitter、Medium、Github 等等，<strong>它们之间仍然可以通过网址（URL）随意互相链接，遵循 Web 开放标准，并且你几乎可以在任何一个具备浏览器的平台上使用这项服务，因此 Web App 同样是开放的。</strong></p>
<p>如果你听说过 Google 的 Progressive Web Apps，它其实代表的是 Progressive Open Web Apps，只是这样实在太长太啰嗦了。</p>
<p>毕竟，Web 的概念里理应包含着 Open。</p>
<p>（这篇文章的本意并不是为了 advocate PWA，但如果你对 PWA 有兴趣，欢迎阅读： <a href="https://zhuanlan.zhihu.com/p/25167289" target="_blank" rel="noopener">黄玄：下一代 Web 应用模型 — Progressive Web App​zhuanlan.zhihu.com!</a></p>
<p>如果说 Hybrid 架构还只是 Web 理想主义的一次让步，那么 React Native 的出现则无疑让部分人的信仰崩塌，然后是 Weex，然后可能是你们猜的微信。</p>
<p>眼见 “以 Web 范式为 Native 平台进行开发” 的方式越来越火，虽然受益的好像是 Web 前端从业人员，可我却不知该不该开心。</p>
<p>我不是说它们是“错误的技术方向”，从实用主义来说它们很棒，很解决问题。</p>
<p><strong>但是，无论他们长得有多像 Web，他们都不是 Open Web 平台的一员。</strong></p>
<p>RN/Weex 根本没有 URL（别跟我说 Universal Links 或 App Links，URL 和 URI 是不同的）</p>
<p>而微信从 JS-SDK 开始，便已经是一个封闭生态了。</p>
<p>这种势头虽然缘起于 Facebook，却更可能在中国撒起野来。</p>
<p>英文世界里对这类事情敏感/hardcore 的人很多，比如写了 <a href="https://adactio.com/journal/10708" target="_blank" rel="noopener">Regressive Web Apps</a> 的 Jeremy Keith，因为 PWA 对 URL 不够友好的事情跟 Chrome 开发老大 Alex 吵了一架，而 Alex 也急得说出了：</p>
<blockquote>
<p>so, your choices are to think that I have a secret plan to kill URLs, or conclude I’m still Team Web.</p>
</blockquote>
<p>要知道，Alex 带着 Chrome 搞 PWA 的原因就是看不爽 Hybrid 破坏了 Open Web。</p>
<p>倘若 Twitter/FB 跟微信一样连链接还不让随便链，大概都得弃用 Twitter，然后像如一一样火冒三丈的写一篇 Byebye Twitter/FB。</p>
<p>而国内天天鼓吹得什么 XX 助力 HTML5 生态，却不知大部分时候这些所谓 “HTML5 生态” 都是和 Web 生态背道而驰的，高下立判。</p>
<p>我开始有些语无伦次了。</p>
<p>在这个 HTML5 与 Web 被极度误用的中文世界里，我也不知道该如何呐喊了。</p>
<p>我只知道，当 Web 只能作为 Native 的 “Markup Language” 存活时，Web 也就不复存在了。</p>
<p>当大家都不跟随 Web 标准自造一套时，Web 所谓的跨平台特性也就烟消云散了。</p>
<p>我之前写过的，Chrome 产品 Leader Rahul 也在 I/O 上说过得：</p>
<p>Web 的 Dicoverable、Linkable、Low Friction、Broad Reach 等等，这些都不是 Web 的本质，<strong>Web 的本质是 Open（开放）与 Decentralized （去中心化），这才是万维网（WWW）的初衷，这才是所有这些特性能成立的前提。</strong></p>
<p>Open Web 的信仰让浏览器厂商们重新走到了一起，他们在问你:</p>
<p><strong>Hey, can we make the web great again?</strong></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/02/01/2016-02-01-React-vs-Angular2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/02/01/2016-02-01-React-vs-Angular2/" class="post-title-link" itemprop="url">「译」React vs Angular 2：冰与火之歌</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-02-01 12:00:00" itemprop="dateCreated datePublished" datetime="2016-02-01T12:00:00+08:00">2016-02-01</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-04 11:56:32" itemprop="dateModified" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>这篇文章转载自<a href="http://zhuanlan.zhihu.com/FrontendMagazine/20549104" target="_blank" rel="noopener">我在知乎专栏「前端外刊评论」上发表的文章</a>。</p>
</blockquote>
<p><a href="https://angular.io/" target="_blank" rel="noopener">Angular 2</a> 已经发布 Beta 版，而且似乎很有信心在 2016 年成为热门框架。是时候进行一场巅峰对决了，我们来看看它如何与 <a href="https://facebook.github.io/react/" target="_blank" rel="noopener">React</a> 这个 2015 年的新宠抗衡。</p>
<p><strong>免责声明：</strong>我之前很喜欢使用 Angular 1，不过在 2015 年转到了 React。最近我也在 Pluralsight 上发布了一门关于 <a href="https://www.pluralsight.com/courses/react-flux-building-applications" target="_blank" rel="noopener">React 和 Flux 的课程</a>（<a href="http://app.pluralsight.com/signup" target="_blank" rel="noopener">免费试学</a>）。所以，<strong>是的，我本人是有偏见的，但我不会偏袒任何一方。</strong></p>
<p>好了，我们开始吧，这场对决将会非常血腥。</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*MRPl_SNuRGJchb6eOAnkSA.jpeg" alt></p>
<p>图片来源：<a href="https://twitter.com/jwcarroll" target="_blank" rel="noopener">@jwcarrol</a></p>
<h2 id="两者根本不具有可比性！"><a href="#两者根本不具有可比性！" class="headerlink" title="两者根本不具有可比性！"></a>两者根本不具有可比性！</h2><p>是的是的，Angular 是框架，React 是类库。所以有人觉得比较这两者没有逻辑性可言。大错特错！</p>
<blockquote>
<p>选择 Angular 还是 React 就像选择直接购买成品电脑还是买零件自己组装一样。</p>
</blockquote>
<p>两者的优缺点本文都会提及，我会拿 React 语法和组件模型跟 Angular 的语法和组件模型做对比。这就像是拿成品电脑的 CPU 跟零售的 CPU 做对比，没有任何不妥。</p>
<h2 id="Angular-2-的优点"><a href="#Angular-2-的优点" class="headerlink" title="Angular 2 的优点"></a>Angular 2 的优点</h2><p>我们先看 Angular 相对 React 有哪些优势。</p>
<h4 id="无选择性疲劳"><a href="#无选择性疲劳" class="headerlink" title="无选择性疲劳"></a><strong>无选择性疲劳</strong></h4><p>Angular 是一个完整的框架，本身就提供了比 React 多得多的建议和功能。而要用 React，开发者通常还需要借助别的类库来打造一个真正的应用。比如你可能需要额外的库来处理路由、强制单向数据流、进行 API 调用、做测试以及管理依赖等等。要做的选择和决定太多了，让人很有压力。这也是为什么 React 有那么多的入门套件的原因（我自己就写了两个：<a href="https://github.com/coryhouse/react-flux-starter-kit" target="_blank" rel="noopener">1</a>、<a href="https://github.com/coryhouse/react-slingshot" target="_blank" rel="noopener">2</a>）。</p>
<p>Angular 自带了不少主张，所以能够帮助你更快开始，不至于因为要做很多决定而无所适从。这种强制的一致性也能帮助新人更快适应其开发模式，并使得开发者在不同团队间切换更具可行性。</p>
<p>Angular 核心团队让我非常欣赏的一点是，他们拥抱了 TypeScript，这就造成了另一个优势。</p>
<h4 id="TypeScript-阳关大道"><a href="#TypeScript-阳关大道" class="headerlink" title="TypeScript = 阳关大道"></a>TypeScript = 阳关大道</h4><p>没错，并非所有人都喜欢 TypeScript，但是 Angular 2 毅然决然地选择了它确实是个巨大的优势。反观 React，网上的各种示例应用令人沮丧地不一致——ES5 和 ES6 的项目基本上各占一半，而且目前存在<a href="http://jamesknelson.com/should-i-use-react-createclass-es6-classes-or-stateless-functional-components/" target="_blank" rel="noopener">三种不同的组件声明方式</a>。这无疑给初学者造成了困惑。（Angular 还拥抱了装饰器（decorator）而不是继承（extends）——很多人认为这也是个加分项）。</p>
<p>尽管 Angular 2 并不强制使用 TypeScript，但显然的是，Angular 的核心团队默认在文档中使用 TypeScript。这意味着相关的示例应用和开源项目更有可能保持一致性。Angular 已经提供了<a href="https://angular.io/docs/ts/latest/quickstart.html" target="_blank" rel="noopener">非常清晰的关于如何使用 TypeScript 编译器的例子</a>。（诚然，目前<a href="http://angularjs.blogspot.com/2015/09/angular-2-survey-results.html" target="_blank" rel="noopener">并非所有人都在拥抱 TypeScript</a>，但我有理由相信等到正式发布之后，TypeScript 会成为事实上的标准）。这种一致性应该会帮助初学者避免在学习 React 时遇到的疑惑和选择困难。</p>
<h4 id="极少的代码变动"><a href="#极少的代码变动" class="headerlink" title="极少的代码变动"></a>极少的代码变动</h4><p>2015 年是 <a href="https://medium.com/@ericclemmons/javascript-fatigue-48d4011b6fc4#.559iqxb39" target="_blank" rel="noopener">JavaScript 疲劳</a>元年，React 可以说是罪魁祸首。而且 React 尚未发布 1.0，所以未来还可能有很多变数。React 生态圈依旧在快速地变动着，尤其是<a href="https://github.com/kriasoft/react-starter-kit/issues/22" target="_blank" rel="noopener">各种 Flux 变种</a>和<a href="https://github.com/rackt/react-router" target="_blank" rel="noopener">路由</a>。也就是说，你今天用 React 写的所有东西，都有可能在 React 1.0 正式发布后过时，或者必须进行大量的改动。</p>
<p>相反，Angular 2 是一个对已经成熟完整框架（Angular 1）的重新发明，而且经过仔细、系统的设计。所以 Angular 不大可能在正式发布后要求已有项目进行痛苦的代码变动。Angular 作为一个完整的框架，你在选择它的时候，也会信任其开发团队，相信他们会认真决定框架的未来。而使用 React，一切都需要你自己负责，你要自己整合一大堆开源类库来打造一个完整的应用，类库之间互不相干且变动频繁。这是一个令人沮丧的耗时工作，而且永远没有尽头。</p>
<h4 id="广泛的工具支持"><a href="#广泛的工具支持" class="headerlink" title="广泛的工具支持"></a><strong>广泛的工具支持</strong></h4><p>后面我会说，我认为 React 的 JSX 是非常耀眼的亮点。然而要使用 JSX，你需要选择支持它的工具。尽管 React 已经足够流行，工具支持不再是什么问题，但诸如 IDE 和 lint 工具等新工具还不大可能很快得到支持。Angular 2 的模版是保存在一个字符串或独立的 HTML 文件中的，所以不要求特殊的工具支持（不过似乎 Angular 字符串模版的智能解析工具已经呼之欲出了）。</p>
<h4 id="Web-Components-友好"><a href="#Web-Components-友好" class="headerlink" title="Web Components 友好"></a>Web Components 友好</h4><p>Angular 2 还拥抱了 Web Component 标准。唉，真尴尬我居然一开始忘记提到这点了——最近我还发布了一门关于<a href="https://www.pluralsight.com/courses/web-components-shadow-dom" target="_blank" rel="noopener">Web Components 课程</a>呢！简单来说，把 Angular 2 组件转换成原生 Web Components 应该会比 React 组件容易得多。固然 Web Components 的<a href="http://jonrimmer.github.io/are-we-componentized-yet/" target="_blank" rel="noopener">浏览器支持度依然很弱</a>，但长期来看，对 Web Components 友好是很大的优势。</p>
<p>Angular 的实现有其自身的局限和陷阱，这正好让我过渡到对 React 优势的讨论。</p>
<h3 id="React-的优点"><a href="#React-的优点" class="headerlink" title="React 的优点"></a>React 的优点</h3><p>现在，让我们看看是什么让 React 如此与众不同。</p>
<h4 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a><strong>JSX</strong></h4><p>JSX 是一种类似 HTML 的语法，但它实际上会被编译成 JavaScript。将标签与代码混写在同一个文件中意味着输入一个组件的函数或者变量时你将享受到自动补全的福利。而 Angular 基于字符串的模版就相形见绌了：很多编辑器都不会高亮它们（只会显示单色）、只有有限的代码补全支持，并且一直到运行时才会报错。并且，通常你也只能得到很有限的错误提示。不过，Angular 的团队<a href="https://github.com/angular/angular/issues/4417" target="_blank" rel="noopener">造了一个自己的 HTML 解析器来解决这个问题</a>。（叼叼叼！）</p>
<p>如果你不喜欢 Angular 的字符串模版，你可以把模版移到一个单独的文件里去。不过这样你就回到了我认为的“老样子”：你需要在自己脑袋里记住这两个文件的关联，不但没有代码自动补全，也没有任何编译时检查来协助你。这听起来可能并不算什么……除非你已经爱上了与 React 相伴的日子。在同一个文件中组合组件还能享受编译时的检查，大概是 JSX 最与众不同的地方之一了。</p>
<p><img src="http://p5.qhimg.com/d/inn/8a99f370/2.jpg" alt></p>
<p>对比 Angular 2 与 React 在标签忘记闭合时是如何表现的。</p>
<p>关于为什么 JSX 是一个巨大的优势，可以看看 <a href="https://medium.com/@housecor/react-s-jsx-the-other-side-of-the-coin-2ace7ab62b98#.5007n49wq" target="_blank" rel="noopener">JSX：硬币的另一面（JSX: The Other Side of the Coin）</a>. （P.S. 这是作者写的另一篇文章，如果大家希望我们可以把这篇也翻了，欢迎在评论区举手）</p>
<h4 id="React-报错清晰快速"><a href="#React-报错清晰快速" class="headerlink" title="React 报错清晰快速"></a>React 报错清晰快速</h4><p>当你在 React 的 JSX 中不小心手抖打错时，它并不会被编译。这是一件非常美妙的事情：无论你是忘记闭合了标签还是引用了一个不存在的属性（property），你都可以立刻知道到底是哪一行出错了。<strong>JSX 编译器会指出你手抖的具体行号</strong>，彻彻底底加速你的开发。</p>
<p>相反，当你在 Angular 2 中不小心敲错了一个变量时，鸦雀无声。<strong>Angular 2 并不会在编译时做什么，它会等到运行时才静默报错。</strong>它报错得<em>如此之慢</em>，我加载完整个应用然后奇怪为什么我的数据没有显示出来呢？这太不爽了。</p>
<h4 id="React-以-JavaScript-为中心"><a href="#React-以-JavaScript-为中心" class="headerlink" title="React 以 JavaScript 为中心"></a>React 以 JavaScript 为中心</h4><p>终于来了。这才是 React 和 Angular 的根本区别。<strong>很不幸，Angular 2 仍然是以 HTML 而非 JavaScript 为中心的。</strong>Angular 2 并没有解决它设计上的根本问题：</p>
<blockquote>
<p>Angular 2 继续把 “JS” 放到 HTML 里。React 则把 “HTML” 放到 JS 里。</p>
</blockquote>
<p>这种分歧带来的影响真是再怎么强调也不为过。它们从根本上影响着开发体验。Angular 以 HTML 为中心的设计留下了巨大的缺陷。正如我在 <a href="https://medium.com/@housecor/react-s-jsx-the-other-side-of-the-coin-2ace7ab62b98#.jqh5kkxlk" target="_blank" rel="noopener">JSX：硬币的另一面</a> 中所说的，JavaScript 远比 HTML 要强大。因此，<strong>增强 JavaScript 让其支持标签要比增强 HTML 让其支持逻辑要合理得多</strong>。无论如何，HTML 与 JavaScript 都需要某种方式以粘合在一起。React 以 JavaScript 为中心的思路从根本上优于 Angular、Ember、Knockout 这些以 HTML 为中心的思路。</p>
<p>让我们来看看为什么。</p>
<h4 id="React-以-JavaScript-为中心的设计-简约"><a href="#React-以-JavaScript-为中心的设计-简约" class="headerlink" title="React 以 JavaScript 为中心的设计 = 简约"></a>React 以 JavaScript 为中心的设计 = 简约</h4><p>Angular 2 延续了 Angular 1 试图让 HTML 更加强大的老路子。所以即使是像循环或者条件判断这样的简单任务你也不得不使用 Angular 2 的独特语法来完成。例如，Angular 2 通过两种语法同时提供了单向数据绑定与双向数据绑定，可不幸的是它们实在差得有点多：</p>


undefined



<p>在 React 中，数据绑定语法不取决于数据流的单双向（数据绑定的单双向是在其他地方处理的，不得不说我觉得理应如此）。不管是单向还是双向数据流，绑定语法都是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;myVar&#125;</span><br></pre></td></tr></table></figure>

<p>Angular 2 的内联母版（inline master templates）使用了这样的语法：</p>

undefined



<p>上面这个代码片段遍历了一组 hero，而我比较关心的几点是：</p>
<ul>
<li>通过星号来声明一个“母版”实在是太晦涩了</li>
<li><code>hero</code> 前的英镑符号（<code>#</code>）用于声明一个局部模版变量。这个概念感觉非常鸡肋（如果你偏好不使用 <code>#</code>，你也可以使用 <code>var-</code> 前缀写法）</li>
<li>为 HTML 加入了循环语义的HTML 特性（attribute）<code>ngFor</code> 是 Angular 特有的东西</li>
</ul>
<p>相比上面 Angular 2 的语法，React 的语法可是纯净的 JavaScript （不过我得承认下面的属性 <code>key</code> 是个 React 的私货）</p>
<figure class="highlight hbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &#123; heroes.map(hero =&gt;</span><br><span class="line">    &lt;li key=&#123;hero.id&#125;&gt;&#123;hero.name&#125;&lt;/li&gt;</span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<p>鉴于 JS 原生支持循环，React JSX 利用 JS 的力量来做到这类事情简直易如反掌，配合 <code>map</code>、<code>filter</code> 能做的还远不止此。</p>
<p>去看看 <a href="https://angular.io/docs/ts/latest/guide/cheatsheet.html" target="_blank" rel="noopener">Angular 2 速查表</a>？那不是 HTML，也不是 JavaScript……这叫 <strong>Angular</strong>。</p>
<blockquote>
<p><strong>读懂 Angular：</strong> 学一大堆 Angular 特有的语法</p>
<p>读懂 React： 学 JavaScript</p>
</blockquote>
<p>React 因为语法和概念的简约而与众不同。我们不妨品味下当今流行的 JS 框架/库都是如何实现遍历的：</p>

undefined



<p>除了 React，所有其它框架都用自己的专有语法重新发明了一个我们在 JavaScript 常见得不能再常见的东西：<strong>循环</strong>。这大概就是 React 的美妙之处，利用 JavaScript 的力量来处理标签，而不是什么奇怪的新语法。</p>
<p>Angular 2 中的奇怪语法还有点击事件的绑定：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(click)=<span class="string">"onSelect(hero)"</span></span><br></pre></td></tr></table></figure>

<p>相反，React 再一次使用了普通的 JavaScript：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onClick=&#123;<span class="keyword">this</span>.onSelect.bind(<span class="keyword">this</span>, hero)&#125;</span><br></pre></td></tr></table></figure>

<p>并且，鉴于 React 内建了一个模拟的事件机制（Angular 2 也有），你并不需要去担心使用内联语法声明事件处理器所暗含的性能问题。</p>
<p>为什么要强迫自己满脑子都是一个框架的特殊语法呢？为什么不直接拥抱 JS 的力量？</p>
<h4 id="奢华的开发体验"><a href="#奢华的开发体验" class="headerlink" title="奢华的开发体验"></a>奢华的开发体验</h4><p>JSX 具备的代码自动补全、编译时检查与丰富的错误提示已经创造了非常棒的开发体验，既为我们减少了输入，与节约了时间。而配合上热替换（hot reloading）与时间旅行（time travel），你将获得前所未有的开发体验，效率高到飞起。</p>
<p>原文这里链了个 Youtube 上的视频：<a href="https://www.youtube.com/watch?v=xsSnOQynTHs&feature=youtu.be" target="_blank" rel="noopener">Dan Abramov - Live React: Hot Reloading with Time Travel at react-europe 2015</a>，大家自备梯子。</p>
<h4 id="担心框架的大小？"><a href="#担心框架的大小？" class="headerlink" title="担心框架的大小？"></a>担心框架的大小？</h4><p>这里是一些常见框架/库压缩后的大小（<a href="https://gist.github.com/Restuta/cda69e50a853aa64912d" target="_blank" rel="noopener">来源</a>）：</p>
<ul>
<li><strong>Angular 2:</strong> 566k (766k with RxJS)</li>
<li><strong>Ember:</strong> 435k</li>
<li><a href="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js" target="_blank" rel="noopener"><strong>Angular 1</strong></a><strong>:</strong> 143k</li>
<li><strong>React + Redux:</strong> 139k</li>
</ul>
<p>列出的都是框架级的、用于浏览器且压缩后的大小（但并未 gzip）。需要补充的是，Angular 2 的尺寸在最终版本发布时应该会有所减小。</p>
<p>为了做一个更真实的对比，我将 Angular 2 <a href="https://angular.io/docs/ts/latest/tutorial/" target="_blank" rel="noopener">官方教程</a>中的 Tour of Heroes 应用用 Angular 2 和 React（还用上了新的 <a href="https://github.com/coryhouse/react-slingshot" target="_blank" rel="noopener">React Slingshot</a> 入门套件）都实现了一遍，结果如何呢？</p>
<ul>
<li><a href="https://github.com/coryhouse/angular-2-tour-of-heroes/tree/master" target="_blank" rel="noopener"><strong>Angular 2</strong></a><strong>:</strong> 764k 压缩后</li>
<li><a href="https://github.com/coryhouse/react-tour-of-heroes" target="_blank" rel="noopener"><strong>React + Redux</strong></a><strong>:</strong> 151k 压缩后</li>
</ul>
<p>可以看到，<strong>做一个差不多的东西，Angular 2 目前的尺寸是 React + Redux 的五倍还多</strong>。重要的事情再说一遍，Angular 2 的最终版本应该会减重。</p>
<p>不过，我承认关于框架大小的担忧可能被夸大了：</p>
<blockquote>
<p>大型应用往往至少有几百 KB 的代码，经常还更多，不管它们是不是使用了框架。开发者需要做很多的抽象来构建一个复杂的软件。无论这些抽象是来自框架的还是自己手写的，它都会对应用的加载性能造成负面影响。  </p>
<p> 就算你完全杜绝框架的使用，许多应用仍然是几百 KB 的 JavaScript 在那。 — Tom Dale <a href="http://tomdale.net/2015/11/javascript-frameworks-and-mobile-performance/" target="_blank" rel="noopener">JavaScript Frameworks and Mobile Performance</a></p>
</blockquote>
<p>Tom 的观点是对的。像 Angular、Ember 这样的框架之所以更大是因为它们自带了更多的功能。</p>
<p>但是，我关心的点在于：很多应用其实用不到这种大型框架提供的所有功能。在这个越来越拥抱微服务、微应用、<a href="http://www.npmjs.com" target="_blank" rel="noopener">单一职责模块（single-responsibility packages）</a>的时代，<strong>React 通过让你自己挑选必要模块，让你的应用大小真正做到量身定做</strong>。在这个有着 200,000 个 npm 模块的世界里，这点非常强大。</p>
<h4 id="React-信奉Unix-哲学"><a href="#React-信奉Unix-哲学" class="headerlink" title="React 信奉Unix 哲学."></a>React 信奉<a href="https://en.wikipedia.org/wiki/Unix_philosophy" target="_blank" rel="noopener">Unix 哲学</a>.</h4><p>React 是一个类库。它的哲学与 Angular、Ember 这些大而全的框架恰恰相反。你可以根据场景挑选各种时髦的类库，搭配出你的最佳组合。JavaScript 世界在飞速发展，React 允许你不断用更好的类库去迭代你应用中的每个小部分，而不是傻等着你选择的框架自己升级。</p>
<p>Unix 久经沙场屹立不倒，原因就是：</p>
<blockquote>
<p>小而美、可组合、目的单一，这种哲学永远不会过时。</p>
</blockquote>
<p>React 作为一个专注、可组合并且目的单一的工具，已经被<a href="https://github.com/facebook/react/wiki/Sites-Using-React" target="_blank" rel="noopener">全世界的各大网站们</a>使用，预示着它的前途光明（当然，Angular 也被用于<a href="https://www.madewithangular.com/#/" target="_blank" rel="noopener">许多大牌网站</a>）。</p>
<h4 id="谢幕之战"><a href="#谢幕之战" class="headerlink" title="谢幕之战"></a>谢幕之战</h4><p>Angular 2 相比第一代有着长足的进步。新的组件模型比第一代的指令（directives）易学许多；新增了对于同构／服务器端渲染的支持；使用虚拟 DOM 提供了 3-10 倍的性能提升。这些改进使得 Angular 2 与 React 旗鼓相当。不可否认，它功能齐全、观点鲜明，能够显著减少 “JavaScript 疲劳” 。</p>
<p>不过，Angular 2 的大小和语法都让我望而却步。Angular 致力的 HTML 中心设计比 React 的 JavaScript 中心模型要复杂太多。在 React 中，你并不需要学习 <code>ng-什么什么</code> 这种框架特有的 HTML 补丁（shim），你只要写 JavaScript 就好了。这才是我相信的未来。</p>
<h3 id="著作权声明"><a href="#著作权声明" class="headerlink" title="著作权声明"></a>著作权声明</h3><p>本文译自 <a href="https://medium.freecodecamp.com/angular-2-versus-react-there-will-be-blood-66595faafd51#.v4y4euy1r" target="_blank" rel="noopener">Angular 2 versus React: There Will Be Blood</a>，其实<a href="http://www.w3ctech.com/topic/1675?from=timeline&isappinstalled=0" target="_blank" rel="noopener">之前有人翻译过</a>，但是翻得水平有一点不忍直视，我们不希望浪费这篇好文章。<br>本文由 <a href="https://www.zhihu.com/people/li-ling-hao" target="_blank" rel="noopener">@李凌豪</a> <a href="https://www.zhihu.com/people/huxpro" target="_blank" rel="noopener">@黄玄</a> 联合翻译，首次发布于<a href="http://zhuanlan.zhihu.com/FrontendMagazine" target="_blank" rel="noopener">前端外刊评论 · 知乎专栏</a>，转载请保留原文链接 ;)</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/12/28/2015-12-28-css-sucks-2015/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/12/28/2015-12-28-css-sucks-2015/" class="post-title-link" itemprop="url">都 2015 年了，CSS 怎么还是这么糟糕</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-12-28 00:00:00" itemprop="dateCreated datePublished" datetime="2015-12-28T00:00:00+08:00">2015-12-28</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-04 11:56:32" itemprop="dateModified" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>下滑这里查看更多内容</p>
</blockquote>
<h3 id="Watching-Fullscreen-→"><a href="#Watching-Fullscreen-→" class="headerlink" title="Watching Fullscreen →"></a><a href="https://huangxuan.me/css-sucks-2015/" target="_blank" rel="noopener">Watching Fullscreen →</a></h3><div class="visible-md visible-lg">
<img src="//huangxuan.me/css-sucks-2015/attach/qrcode.png" width="350">
<small class="img-hint">你也可以通过扫描二维码在手机上观看</small>
</div>


<p>这个 Web Slides 开源在<a href="https://github.com/Huxpro/css-sucks-2015" target="_blank" rel="noopener">我的 Github 上</a>，欢迎你帮助我完善这个展示文稿，你可以给我提 issue，可以 fork &amp; pull request。如果它能帮助到你了，希望你还能不吝啬 star 一下这个项目</p>
<h3 id="Catalog"><a href="#Catalog" class="headerlink" title="Catalog"></a>Catalog</h3><ul>
<li>Document Times<ul>
<li>Frameworks</li>
<li>Style Guide<ul>
<li><strong>OOCSS</strong></li>
<li><strong>SMACSS</strong></li>
</ul>
</li>
<li><strong>Pre-processer</strong></li>
<li><strong>PostCSS</strong></li>
</ul>
</li>
<li>Application Times<ul>
<li><strong>Shadow DOM</strong></li>
<li><strong>CSS “4”</strong></li>
<li>Naming Convention<ul>
<li><strong>BEM</strong></li>
<li><strong>SUIT</strong></li>
</ul>
</li>
<li><strong>Atomic CSS</strong></li>
<li><strong>CSS in JS</strong></li>
<li><strong>CSS Modules</strong>  <ul>
<li>Interoperable CSS</li>
</ul>
</li>
<li>PostCSS, again</li>
</ul>
</li>
<li>My Opinionated Proposal<ul>
<li><strong>POCss</strong></li>
</ul>
</li>
</ul>
<h2 id="POCss-Page-Override-Components-CSS"><a href="#POCss-Page-Override-Components-CSS" class="headerlink" title="POCss: Page Override Components CSS"></a>POCss: Page Override Components CSS</h2><h3 id="1-Scoping-Components-CSS-Blocks-should-only-be-used-inside-a-component-of-the-same-name"><a href="#1-Scoping-Components-CSS-Blocks-should-only-be-used-inside-a-component-of-the-same-name" class="headerlink" title="1. Scoping Components CSS Blocks should only be used inside a component of the same name."></a>1. Scoping Components <br><small style="line-height:2em;"><em>CSS Blocks should only be used inside a component of the same name.</em></small></h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Component/index.scss</span></span><br><span class="line"><span class="selector-class">.ComponentName</span> &#123;</span><br><span class="line">    &amp;--mofierName &#123;&#125;</span><br><span class="line">    &amp;__decendentName &#123;</span><br><span class="line">        &amp;--modifierName &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.isStateOfComponent</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Component/index.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./index.scss'</span>);</span><br></pre></td></tr></table></figure>

<p>CSS is <em>always bundled</em> with components<br>(from loading, mount to unmount)</p>
<h3 id="2-Components-can-be-Overrode-by-Pages-There-is-always-requirements-to-rewrite-styles-of-components-in-pages"><a href="#2-Components-can-be-Overrode-by-Pages-There-is-always-requirements-to-rewrite-styles-of-components-in-pages" class="headerlink" title="2. Components can be Overrode by Pages There is always requirements to rewrite styles of components in pages"></a>2. Components can be Overrode by Pages <br><small style="line-height:2em;"><em>There is always requirements to rewrite styles of components in pages</em></small></h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pages/PageA.scss</span></span><br><span class="line"><span class="selector-id">#PageA</span> &#123;</span><br><span class="line">    <span class="selector-class">.pagelet-name</span> &#123;</span><br><span class="line">        <span class="selector-class">.pagelet-descendent-name</span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.ComponentName</span>&#123; <span class="comment">/* override */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pages/index.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./PageA.scss'</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><em>#Page</em> for absolutely scoping between pages</li>
<li><em>.pagelet-name</em> should be lowercase to prevent conflicting with components</li>
</ul>
<h3 id="Why-POC"><a href="#Why-POC" class="headerlink" title="Why POC?"></a>Why POC?</h3><ul>
<li><p><strong>It’s technology-agnostic</strong></p>
<small>
  *One css framework can be played with whatever technology stacks*<br>
  *You can combined Scss, PostCSS and whatever you want*
</small>
</li>
<li><p><strong>Solving problems, and easy</strong></p>
<small>
  *Makes reading and teamwork much easier*<br>
  *Get all benefit from BEM, SUITCSS and others*
</small>
</li>
<li><p><strong>Leverage the power of cascading properly</strong></p>
<small>
  *Scoping components but allow reasonable overriding*<br>
  *It's pragmatic, flexible and hitting the sweet spot*
</small>

</li>
</ul>
<h3 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h3><p><a href="http://lab.hakim.se/reveal-js" target="_blank" rel="noopener">Reveal.js</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/12/15/2015-12-15-ios9-safari-web/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/12/15/2015-12-15-ios9-safari-web/" class="post-title-link" itemprop="url">「译」iOS 9，为前端世界都带来了些什么？</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-12-15 00:00:00" itemprop="dateCreated datePublished" datetime="2015-12-15T00:00:00+08:00">2015-12-15</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-04 11:56:32" itemprop="dateModified" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2015 年 9 月，Apple 重磅发布了全新的 iPhone 6s/6s Plus、iPad Pro 与全新的操作系统 watchOS 2 与 tvOS 9（是的，这货居然是第 9 版），加上已经发布的 iOS 9，它们都为前端世界带来了哪些变化呢？作为一个 web 开发者，是时候站在我们的角度来说一说了！</p>
<blockquote>
<p><strong>注！</strong> 该译文存在大量英文术语，笔者将默认读者知晓 ES6、viewport、native app、webview 等常用前端术语，并不对这些已知术语进行汉语翻译<br>对于新发布或较新的产品名称与技术术语，诸如 Apple Pen、Split View 等专有名词，笔者将在文中使用其英文名，但会尝试对部分名词进行汉语标注<br>另外，出于对 wiki 式阅读的偏爱，笔者为您添加了很多额外的链接，方便您查阅文档或出处</p>
</blockquote>
<h2 id="简而言之"><a href="#简而言之" class="headerlink" title="简而言之"></a>简而言之</h2><p>如果你不想阅读整篇文章，这里为你准备了一个总结：</p>
<h6 id="新的设备特性"><a href="#新的设备特性" class="headerlink" title="新的设备特性"></a>新的设备特性</h6><ul>
<li>iPhone 6s 与 6s Plus 拥有 <strong>“<a href="http://www.apple.com/iphone-6s/3d-touch/" target="_blank" rel="noopener">3D Touch</a>”</strong>，这是一个全新的硬件特性，它可以侦测压力，是一个可以让你拿到手指压力数据的 API</li>
<li>iPad Pro 的 viewport 为 1024px，与以往的 iPad 全都不同</li>
<li>想在 iPad Pro 上支持新的 Apple Pen？不好意思，目前似乎并没有适用于网站的 API </li>
</ul>
<h6 id="新的操作系统特性（与-web-相关的）"><a href="#新的操作系统特性（与-web-相关的）" class="headerlink" title="新的操作系统特性（与 web 相关的）"></a>新的操作系统特性（与 web 相关的）</h6><ul>
<li>iPad 上的 Safari 现在可以通过 <a href="https://developer.apple.com/library/prerelease/ios/documentation/WindowsViews/Conceptual/AdoptingMultitaskingOniPad/QuickStartForSlideOverAndSplitView.html#//apple_ref/doc/uid/TP40015145-CH13-SW1" target="_blank" rel="noopener">Split View</a>（分屏视图）与其他应用一起使用，这意味着新的 viewport 尺寸将会越来越常见</li>
<li>新的 Safari View Controller（<a href="https://developer.apple.com/library/prerelease/ios/documentation/SafariServices/Reference/SFSafariViewController_Ref/index.html#//apple_ref/occ/cl/SFSafariViewController" target="_blank" rel="noopener"><code>SFSafariViewController</code></a>）可以让你在 native app 内提供与 Safari 界面、行为连贯一致的应用内网页浏览体验</li>
<li>注意啦！Safari 新加入了 Content Blocker（内容拦截器）。以后，并不是所有的访问都一定会出现在你的 Google Analytics 了</li>
<li><a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12" target="_blank" rel="noopener">Universal Links</a> 可以让应用的拥有者在 iOS 内部“占有”自己的域名。因此，访问 yourdomain.com 将会打开你的应用（类似 Android 的 Intents 机制）</li>
<li><a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/AppSearch/index.html#//apple_ref/doc/uid/TP40016308" target="_blank" rel="noopener">App Search（应用搜索）</a>：现在，Apple 将会抓取你的网页内容（与 native app 内容）用于 Spotlight 与 Siri 的搜索结果，<a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/AppSearch/WebContent.html#//apple_ref/doc/uid/TP40016308-CH8" target="_blank" rel="noopener">想知道你的标签都兼容吗？</a></li>
<li>你的网站现在可以通过 JavaScript API 访问 iCloud 的用户数据</li>
</ul>
<h6 id="新的-API-支持"><a href="#新的-API-支持" class="headerlink" title="新的 API 支持"></a>新的 API 支持</h6><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/timing" target="_blank" rel="noopener">Performance Timing API</a> 在 iOS 9 得到回归</li>
<li>关于 HTML5 Video，你现在可以在支持 <a href="https://developer.apple.com/library/prerelease/ios/documentation/WindowsViews/Conceptual/AdoptingMultitaskingOniPad/QuickStartForPictureInPicture.html#//apple_ref/doc/uid/TP40015145-CH14" target="_blank" rel="noopener">Picture in Picture（画中画）</a>的 iPad 设备上提供这项新功能；你的视频甚至可以在 Safari 关闭后继续播放</li>
<li>更好的 ES6 支持：classes（类）, computed properties（可计算属性）, template literals（模版字符串）等</li>
<li>Backdrop CSS filters（背景滤镜）</li>
<li>CSS @supports 与 CSS Supports JavaScript API </li>
<li>CSS Level4 伪选择器</li>
<li>用于支持分页内容的 CSS Scroll Snapping</li>
<li>WKWebView 现在可以访问本地文件了</li>
<li>我们仍然需要等待 Push Notification，camera access，Service Workers 这些现代 web API 的到来</li>
</ul>
<h6 id="新的操作系统"><a href="#新的操作系统" class="headerlink" title="新的操作系统"></a>新的操作系统</h6><ul>
<li>新一代 Apple TV 的 <strong>tvOS</strong>： 没有浏览器，也没有 webview。但是 JavaScript、XHR 和 DOM 可以通过一个叫做 TVML 的标记语言来使用</li>
<li>Apple Watch 的 <strong>watchOS</strong>：完全没有任何浏览器和 webview</li>
</ul>
<blockquote>
<p><strong>再注！</strong> 由于原文写于 Apple 发布会之前，为了不让读者感到奇怪，笔者将会对文章进行适当改写与补充，以保证本文的连贯性</p>
</blockquote>
<h2 id="新的-iOS-设备特性"><a href="#新的-iOS-设备特性" class="headerlink" title="新的 iOS 设备特性"></a>新的 iOS 设备特性</h2><h5 id="iPhones-6s-与-3D-Touch"><a href="#iPhones-6s-与-3D-Touch" class="headerlink" title="iPhones 6s 与 3D Touch"></a>iPhones 6s 与 3D Touch</h5><p>从 web 设计与开发的角度来说，新的 iPhone 6s 与 6s Plus 与之前的版本并没有太多差别。不过，有一个特性注定会吸引我们的目光：<strong>3D Touch</strong></p>
<p>我们无法确定 Apple 是不是只是重命名了一下 “Force Touch”（用于 Apple Watch、TrackPad 2 与最新的 MacBook 上）或者 3D Touch 的确是一个为 iPhone 定制的似曾相识却不同的东西。3D Touch 允许操作系统和应用侦测每一个手指与屏幕接触时的压力。从用户体验的角度来说，最大的变化莫过于当你用点力去触碰或者拖拽屏幕时，操作系统将会触发诸如 peek，pop 这些新机制。那么问题来了：<strong>我们是否能够在网站中使用这个新玩意呢？让我们一点点来看：</strong></p>
<p>iOS 9 搭载的 Safari 包含了一些用于 “Force Touch” 的新 API，但它们其实并不是那个用于 iPhone 6s 3D Touch 的 API。你可以理解为这些 API 就是 MacBook 版 Safari 里为 Force Touch 准备的那些 API ，因为共享一套 codebase，所以它理所当然得存在了 iOS 版里而已。</p>
<p>Force Touch API 为我们添加了两个新东西：</p>
<ol>
<li>你的 click 事件处理函数将会从 MouseEvent 中收到一个新的属性：<code>webkitForce</code></li>
<li>DOM 也新增了四个事件：<code>(webkit)mouseforcewillbegin</code>，<code>mouseforcedown</code>，<code>mouseforceup</code> 与 <code>mouseforcechange</code>。下边的示意图将告诉你这些事件是在何时被触发的：</li>
</ol>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/foceevents.png" alt="Force Events"></p>
<p>相信你已经从它们的名字中意识到了，这些事件都是基于鼠标而非触摸的，毕竟它们是为 MacBook 设计的。并且，TouchEvent 也并没有包含 <code>webkitForce</code> 这个属性，它仅仅存在于 MouseEvent 里。在 iOS Safari 里，你确实可以找到 <code>onwebkitmouseforce</code> 这一系列事件处理器，但是很可惜它们并不会被触发，click 返回的 MouseEvent 也永远只能得到一个 <code>webkitForce: 0</code></p>
<p>可喜可贺的是，故事还没有结束。<a href="https://w3c.github.io/touch-events/" target="_blank" rel="noopener">Touch Events v2 draft spec（触摸事件第二版草案）</a> 中正式添加了 <code>force</code> 属性。3D Touch 也得以在 iPhone 6s 与 6s+ 中通过 TouchEvent 访问到。不过，笔者也要在这里提醒大家，由于没有 <code>webkitmouseforcechange</code> 这样给力的事件，在手机上我们只能通过 <strong>轮询 TouchEvent 的做法</strong> 来不断检测压力值的改变……非常坑爹</p>
<p><a href="https://twitter.com/fr3ino" target="_blank" rel="noopener">@Marcel Freinbichler</a> 第一个在 Twitter 上晒出了自己的 <a href="http://freinbichler.me/apps/3dtouch" target="_blank" rel="noopener">Demo</a>。在 6s 或 new Macbook 的 Safari（目前仅 Safari 支持）上访问就可以看到圆圈会随着压力放大。墙内的小伙伴可以直接试试下面这个圆圈，体验下 3D/Force Touch 带来的的奇妙体验。</p>
<iframe src="//huangxuan.me/forcify/" style="
    width:100%;
    height:500px;
    border: 0;
"></iframe>

<p>如果你不巧在用不支持 3D/Force Touch 的设备，发现尼玛用力按下去之后居然圆圈也有反映！？</p>
<p>放心，这真的不是你的设备突然习得了“感应压力”这项技能，而是因为 <a href="http://huangxuan.me/forcify" target="_blank" rel="noopener">Forcify</a> 是一个用于在所有设备上 polyfill 3D/Force Touch API 的 JS 库……它不但封装了 OSX/iOS 两个平台之间 API 的差异，还使用”长按”来模拟了 <code>force</code> 值的变化……</p>
<h5 id="iPad-Pro"><a href="#iPad-Pro" class="headerlink" title="iPad Pro"></a>iPad Pro</h5><p>全新的 iPad Pro（12.9 寸）打破了以往 iPad 渲染网站的方式。在此之前，市面上所有的 iPad（从初代 iPad，到 iPad Air 4，到 iPad Mini）都是以 768px 的宽度提供 viewport。</p>
<p>而屏幕更大的 iPad Pro 选择了宽 1024px 的 viewport，这使得它天生就能容纳更多的内容。不少人说iPad Pro 就是抄 Microsft Surface Pro 的嘛……嗯哼，IE/Edge 在 Surface Pro 上就是以 1024px 作为视口宽度的……</p>
<p>从交互的角度上来说，iPad Pro 虽然不支持 3D Touch，但是可以搭配 Smart Keyboard 与/或 Apple Pen（带有压力侦测）使用。对于键盘其实并没有什么好说的，如果一个网站在搭配键盘的桌面电脑上好用，它在 iPad Pro 上应该也不赖。而对于 Apple Pen，很可惜，目前似乎并没有 API 能让你在网站上获得这根笔的压力与角度。</p>
<h2 id="新的-iOS-操作系统特性"><a href="#新的-iOS-操作系统特性" class="headerlink" title="新的 iOS 操作系统特性"></a>新的 iOS 操作系统特性</h2><h5 id="iPad-上的多任务处理"><a href="#iPad-上的多任务处理" class="headerlink" title="iPad 上的多任务处理"></a>iPad 上的多任务处理</h5><p>自 iOS 9 起，iPad 允许两个应用在同一时刻并肩执行，有三种方式：<strong>Slide Over</strong>，<strong>Split View</strong> 与 <strong>Picture-in-Picture</strong>。不过，每一种方式都有其硬件需求，比如说 Slide Over 需要 iPad Air, iPad Mini 2 以上的设备，而 Split View 由于对内存的要求目前只支持 iPad Air 2 与 iPad Pro。</p>
<h6 id="Slide-Over（滑过来！）"><a href="#Slide-Over（滑过来！）" class="headerlink" title="Slide Over（滑过来！）"></a>Slide Over（滑过来！）</h6><p>Slide Over 支持的 App 并不多，不过 Safari 名列其中，这意味着我们的网站将可能在这个模式下被渲染。当网站处于 Slide Over 模式下时，它将在屏幕的右 1/4 位置渲染，并且置于其他 native app 之上。</p>
<p>这个模式也为 Responsive Web Design（响应式网站设计）提出了新的挑战：<strong>一个只为 iPad 优化的网站，也需要能在该设备上以无需手动刷新的形式支持小屏幕的渲染。</strong>因此，如果你正在使用服务器端探测（RESS），那么你的 iPad 版本需要以某种方式包含手机版本的网站，或者在进入该模式后重新加载一次。（如果你不了解 RESS，你可以观看我的<a href="/2014/11/20/responsive-web-design/">另一篇博文</a>）</p>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/slideover.png" alt="Slide Over"></p>
<p>在这个模式下，无论横屏还是竖屏，所有的 iPad（包括 Pro）都会把你的网站以 320px 的 viewport 宽度进行渲染，就好像在一个大 iPhone 5 上一样。你可以在 CSS 中通过 media query（媒体查询）探测到这个模式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* iPad Air or iPad Mini */</span></span><br><span class="line">(<span class="selector-tag">device-width</span>: 768<span class="selector-tag">px</span>) <span class="selector-tag">and</span> (<span class="selector-tag">width</span>: 320<span class="selector-tag">px</span>)</span><br><span class="line"><span class="comment">/* iPad Pro */</span></span><br><span class="line">(<span class="selector-tag">device-width</span>: 1024<span class="selector-tag">px</span>) <span class="selector-tag">and</span> (<span class="selector-tag">width</span>: 320<span class="selector-tag">px</span>)</span><br></pre></td></tr></table></figure>

<h6 id="Split-View（分屏视图）"><a href="#Split-View（分屏视图）" class="headerlink" title="Split View（分屏视图）"></a>Split View（分屏视图）</h6><p>在较新版本的 iPad 上，你可以将 Slide Over 的 Side View（侧视图）升级为 Split View。此时，两个应用将以相同比例在你的屏幕上同时工作。</p>
<p>在这个模式下，我们的网站将可能……</p>
<ul>
<li><strong>以屏幕 1/3 比例渲染时</strong>，viewport 在 iPad Air/mini 犹如 iPhone 5，宽 320px。而在 iPad Pro 上则像是 iPhone 6：宽 375px</li>
<li><strong>以屏幕 1/2 比例渲染时</strong>，viewport 在 iPad Air/mini 上呈现为 507px 宽，而在 iPad Pro（横屏）下呈现为 678px 宽</li>
<li><strong>以屏幕 2/3 比例渲染时</strong>，viewport 在 iPad Air/mini 上呈现为 694px 宽，而在 iPad Pro（横屏）下呈现为 981px 宽</li>
</ul>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/splitview.png" alt="Split View"></p>
<h6 id="Picture-in-Picture（画中画）"><a href="#Picture-in-Picture（画中画）" class="headerlink" title="Picture in Picture（画中画）"></a>Picture in Picture（画中画）</h6><p>在一些较新版本的 iPad 上，使用 HTML5 video 标签的网站可以将其暴露到 Picture in Picture 机制中。通过 API（本文稍后会讲）或用户的触发，视频可以独立于网站在其他应用的上方继续播放。</p>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/pip.png" alt="Picture in Picture"></p>
<h5 id="iOS-9-下的响应式网页设计"><a href="#iOS-9-下的响应式网页设计" class="headerlink" title="iOS 9 下的响应式网页设计"></a>iOS 9 下的响应式网页设计</h5><p>下图向你展示了 iOS 9 所有可能的 viewport 尺寸，检查检查你的响应式断点都包含它们了吗？</p>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/ios9rwd.png" alt="iOS 9 RWD"></p>
<h5 id="Safari-View-Controller"><a href="#Safari-View-Controller" class="headerlink" title="Safari View Controller"></a>Safari View Controller</h5><p>如果你用过 Twitter 或者 Facebook（或者微信，微博……），那么你一定知道很多 native app 在打开一个网页链接时并不会默认使用 Safari。它们试图让你留在它们的应用里，所以通过提供 webview 让你在应用内进行网页浏览。可是问题在于，这类 webview 并不会与浏览器共享 cookies，sessions，autofill（自动填充）与 bookmark（书签），为了解决这些问题，就有了 Safari View Controller。</p>
<p>现在，native app 可以使用 Safari View Controller 来打开网站，它提供与 Safari 完全一致的隐私政策、local storage，cookies、sessions 同时让用户留在你的 app 中，它通过一个 “Done”（完成）按钮使用户可以回到 native app 的上一个 controller。这个全新的 controller 还可以让我们在 Share（分享）按钮上添加自定义的操作，这些操作在用户使用 Safari 应用时并不会出现。同时，native app 对这个自定义 Safari 实例具有完全的内容控制，你可以屏蔽不想被渲染的内容。</p>
<p>当你需要基于 web 的鉴权，比如 OAuth 时，使用 Safari View Controller 同样是一个好主意，这样就不再需要打开浏览器再重定向回你的应用。不过注意了，Safari View Controller 只适用于在线、公开的 web 内容。如果你的 web 内容假设在本地或者私服，那么 WKWebView 仍然是最推荐的选择。</p>
<blockquote>
<p>笔者八卦一下，Safari View Controller 实际上也算是半个社区推进的产物。早在 2014 年 12 月，Tumblr 的 iOS 工程师 Bryan 就发表了一篇著名的 <a href="http://bryan.io/post/104845880796/we-need-a-safari-view-controller" target="_blank" rel="noopener">We need a “Safari view controller”</a> 叙述现有 webview 在第三方登录鉴权时的窘境。<br>2015 年 6 月，Apple Safari 工程师 Ricky Mondello 的 Twitter 宣告了这个设想的落地：You all asked for it. Come see me introduce it. Introducing Safari View Controller 1:30 PM, Tuesday. Nob Hill.</p>
</blockquote>
<h5 id="Safari-Content-Blockers"><a href="#Safari-Content-Blockers" class="headerlink" title="Safari Content Blockers"></a>Safari Content Blockers</h5><p>现在，iOS 9 上的 Safari 支持一种全新的 App Extensions（应用拓展）：<strong>Content Blocker</strong>（内容拦截器）。这类拓展以 native app 的形式存在，你可以在 App Store 上下载到，它们可以拦截 Safari 内的任何内容，包括：跟踪器、广告、自定义字体、大图片、JavaScript 文件等等。</p>
<p>作为 web 开发者，尽管我们不能禁用 Content Blocker，我们仍然应该注意到它们的存在。诸如 Crystal 的一些拦截器宣称他们<a href="http://murphyapps.co/blog/2015/8/22/crystal-benchmarks" target="_blank" rel="noopener">可以提高网页的打开速度</a>。Crystal 声称可以加快网页的加载速度 3.9 倍并且少用 53% 的带宽。不过问题是：到底哪些东西被拦截器拦截了？<a href="http://thenextweb.com/apple/2015/08/27/content-blocking-in-ios-9-is-going-to-screw-up-way-more-than-just-ads/" target="_blank" rel="noopener">这篇文章</a>提到了一些我们未来可能会遇到的问题。</p>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/crystal.png" alt="crystal"></p>
<p>在 iOS 9 发布后，Peace，一个 Content Blocker，曾在 App Store 排名跻身前十。从用户的角度来说，如果一个网站由于被 Content Blocker 拦截了某些重要资源而不能正常工作，你可以长按重新加载按钮并且以不启用 Content Blocker 的方式重新加载这个网站（见下图，来自 MacWorld.com）</p>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/macworld.png" alt="disable content blocker"></p>
<p>Content Blocker 能隐藏元素，也有能力通过 CSS 选择器、域名、类型、或者 URL 来过滤并拦截某个文件的加载，<a href="https://itunes.apple.com/us/app/purify-blocker-fast-clutter/id1030156203?ls=1&mt=8" target="_blank" rel="noopener">Purify Blocker</a> 给用户提供了拦截某一种内容类型的进阶选项，比如 Web Fonts。</p>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/purify.png" alt="purify"></p>
<h5 id="WKWebView-的增强"><a href="#WKWebView-的增强" class="headerlink" title="WKWebView 的增强"></a>WKWebView 的增强</h5><p>UIWebView 已经被官方弃用，虽然它还在在那，不过它再也不会得到什么升级。与此相反，WKWebView 正在取代它的位置。一个最受期待的特性现在终于推出：加载本地文件到 WKWebView。因此，现在 Apache Cordova 应用与其他 web 内容都可以直接从 iOS 包中使用本地文件了，不再需要各种诡异的 hack 了。</p>
<p>此外，还有一些新特性也一并推出。比如说，通过 WKWebsiteDataStore，Objective-C 或 Swift 有能力查询与管理 webview 的本地存储（比如 localStorage 或 IndexedDB）。这就允许我们将原有的数据存储替换成新的某些东西，比如说替换成一个不永久的（Chrome for iOS 的隐身模式就需要这种东西）</p>
<h5 id="Universal-Links（通用链接）"><a href="#Universal-Links（通用链接）" class="headerlink" title="Universal Links（通用链接）"></a>Universal Links（通用链接）</h5><p>如果你既有一个网站，又有一个 native app，你现在可以通过 Universal Links 来增强用户体验。它允许你在操作系统内“占有”自己的域名，这样，一切指向你网站的链接都会被重定向到你的 app。</p>
<p>目前，所有的 app 都是通过自定义 URI 来达到这个效果的，比如 <code>comgooglemaps://</code> 就可以用来从网站或者其他原生 iOS 应用中打开 Google Maps。</p>
<p>想要提供这个特性的话，你首先需要在 native app 中实现 Deep Linking（深度链接），让应用中的内容与 Safari 的 URL 吻合。然后，你需要在 Apple 的网站上关联你的域名，取得这个域名的 SSL 认证并且把签名后的 JSON 部署到该域名上。这是为了防止第三方的应用“占据”了属于你而不属于他们的域名，比如说 twitter.com 被非 Twitter 的其他应用占据掉。</p>
<p>目前唯一的缺点是用户好像并不能决定到底以哪种方式来打开内容（使用 web 还是 app），不过我们可以观望一段时间看看它会如何发展。在不远的这段时间里，你可能会发现在网站或 Google 搜索里点击一个链接时会没有任何预警的就跳进了 native app 里。</p>
<h5 id="App-Search（应用搜索）"><a href="#App-Search（应用搜索）" class="headerlink" title="App Search（应用搜索）"></a>App Search（应用搜索）</h5><p>Apple 带着自己的 web 蜘蛛杀进了搜索的市场，而我们需要支持它得以在 Siri 与 Spotlight 中提升自己的曝光率。这在我们同时拥有网站与 app 时尤为重要，因为现在 Apple 会索引你网站的内容，但打开时却可能将用户带到了 app 里去。</p>
<p>尽管这会开启 SEO 的新篇章，不过却相当容易。你需要使用一些标签标准，诸如 <a href="http://schema.org/" target="_blank" rel="noopener">Web Schema</a>、<a href="http://applinks.org" target="_blank" rel="noopener">AppLinks</a>、<a href="http://ogp.me" target="_blank" rel="noopener">OpenGraph</a> 或者 <a href="https://dev.twitter.com/cards/mobile" target="_blank" rel="noopener">Twitter Cards</a>，配合上 App Banner 与 <code>app-argument</code>，如果你有你自己的 native app 的话。</p>
<blockquote>
<p>关于“让你的网页支持 Apple 搜索”的更多详情，请查阅 Apple 官方文档 <a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/AppSearch/WebContent.html#//apple_ref/doc/uid/TP40016308-CH8-SW5" target="_blank" rel="noopener">Mark Up Web Content</a></p>
</blockquote>
<p>Apple 刚刚发布了一个 <a href="https://search.developer.apple.com/appsearch-validation-tool/" target="_blank" rel="noopener">App Search Validation Tool（应用搜索验证工具）</a>来帮助你搞清楚，需要向你的网站添加什么才能支持 App Search</p>
<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/appsearch-1024x467.png" alt="App Search"></p>
<h5 id="CloudKit-JS"><a href="#CloudKit-JS" class="headerlink" title="CloudKit JS"></a>CloudKit JS</h5><p>如果你拥有一个 native app，你很可能会将用户数据保存在 iCloud 上。在过去，只有 iOS 与 Mac 应用被允许使用它。现在，通过 CloudKit JS，你的网站也可以连接上 iCloud 数据了。</p>
<h5 id="Back-Button"><a href="#Back-Button" class="headerlink" title="Back Button"></a>Back Button</h5><p>现在，当你链接到一个 native app 时（通过自定义 URI 或者 Universal Link），Safari 会询问用户是否想要使用 native app 打开这个链接（见下图）。如果用户同意了，这个应用将被打开，并且在左上角会有一个返回按钮可以返回 Safari ，返回到你的网站。</p>
<img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/back.png" alt="backbutton" width="320">

<h2 id="新的-API-支持-1"><a href="#新的-API-支持-1" class="headerlink" title="新的 API 支持"></a>新的 API 支持</h2><h5 id="Navigation-Timing-API"><a href="#Navigation-Timing-API" class="headerlink" title="Navigation Timing API"></a>Navigation Timing API</h5><p>Navigation Timing API 在 iOS 9 迎来了回归。让我们回忆一下，这货添加于 8.0 却在一周后的 8.1 中去掉了。这对于 Web 性能是个好消息。通过这个 API，我们可以更精确的测量时间，还可以获得一系列有关加载过程的时间戳，它们对于追踪与在真实场景中做决策来改进用户体验都非常有用。</p>
<h5 id="Picture-in-Picture"><a href="#Picture-in-Picture" class="headerlink" title="Picture in Picture"></a>Picture in Picture</h5><p>PiP API（被称为 Presentation Mode API）目前只支持 iOS，它允许我们手动让一个 <code>&lt;video&gt;</code> 元素进入或离开 PiP 模式如果 <code>video.webkitSupportsPresentationMode</code> 是支持的。</p>
<p>举个例子，我们可以在内嵌模式与 PiP 模式中切换：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">video.webkitSetPresentationMode(</span><br><span class="line">    video.webkitPresentationMode === <span class="string">"picture-in-picture"</span> ?</span><br><span class="line">    <span class="string">"inline"</span> : </span><br><span class="line">    <span class="string">"picture-in-picture"</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>我们还可以通过新的 <code>onwebkitpresentationmodechanged</code> 事件来检测 Presentation Mode（展示模式）的变化。</p>
<h5 id="Backdrop-CSS"><a href="#Backdrop-CSS" class="headerlink" title="Backdrop CSS"></a>Backdrop CSS</h5><p>iOS 7 与最近的 Mac OS 使用 Backdrop filter（背景滤镜）来模糊背景（指 native 开发），而在网站上实现这个却并不容易。</p>
<p>iOS 9 上的 Safari 现在支持了来自 Filter Effect v2 spec（滤镜特效第二版规范）的 <strong>backdrop-filter</strong>。比如说，我们可以使用一个半透明的背景并且对其背后的背景使用滤镜：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">   <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.4);</span><br><span class="line">   <span class="attribute">-webkit-backdrop-filter</span>: <span class="built_in">blur</span>(5px);</span><br><span class="line">   <span class="attribute">backdrop-filter</span>: <span class="built_in">blur</span>(5px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/backdrop.png" alt="backdrop"></p>
<h5 id="CSS-Scroll-Snapping"><a href="#CSS-Scroll-Snapping" class="headerlink" title="CSS Scroll Snapping"></a>CSS Scroll Snapping</h5><p>在 web 上实现分页内容（比如相册跑马灯）总是非常麻烦，无论是使用 JavaScript 框架、touch 事件还是 hacking 滚动条等等。Apple 新添加了一个很赞的 CSS 特性叫做 CSS Scroll Snapping。这个特性新增了一系列的 CSS 属性让你定义规则或者不规则的 snap zone（停留区域），这样滚动的位置就会“啪”地一下停在这个区域，而非像以前一样可以停在任何地方。  </p>
<p>来看个例子：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#photo-gallery</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">overflow-x</span>: scroll;</span><br><span class="line">    <span class="attribute">-webkit-scroll-snap-points-x</span>: <span class="built_in">repeat</span>(100%);</span><br><span class="line">    <span class="attribute">-webkit-scroll-snap-type</span>: mandatory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>想要看个跑起来后的例子？笔者为大家准备了 webkit 的官方 <a href="http://www.webkit.org/demos/scroll-snap/" target="_blank" rel="noopener">demo</a>，不过这个属性目前只支持 iOS 9 Safari 哦，并不支持 webview</p>
</blockquote>
<h5 id="CSS-Supports"><a href="#CSS-Supports" class="headerlink" title="CSS Supports"></a>CSS Supports</h5><p>CSS Supports，包括 CSS <code>@supports</code> 与来自 CSS Conditional Rules Module Level 3 spec 的 JavaScript CSS Supports API 都在 iOS 上迎来降临。现在，我们可以针对某个 CSS 属性的特定值的支持情况来编写代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@supports(-webkit-scroll-snap-type: mandatory) &#123;</span><br><span class="line">    <span class="comment">/* we use it */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样，使用 JavaScript：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (CSS.supports(<span class="string">"-webkit-scroll-snap-type"</span>, <span class="string">"mandatory"</span>)) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="一些细微的改进"><a href="#一些细微的改进" class="headerlink" title="一些细微的改进"></a>一些细微的改进</h5><ul>
<li>ECMAScript 6 的更完善支持：classed、computed properties、template literial 与 week sets</li>
<li>新的 CSS Level4 伪类/元素选择器：<code>:not</code>、<code>:matches</code>、<code>:any-link</code>、<code>:placeholder-shown</code>、<code>:read-write</code>、<code>:read-only</code></li>
<li>Native app 现在可以通过 extension 来向 Safari 的 Shared Links（分享链接）窗口上注入信息</li>
<li>大量无前缀 CSS 属性的支持（终于），比如 transition、animation、@keyframes、flex 与 columns</li>
<li>Mac OS El Capitán 上的 Safari 9 提供了一个全新设计的 Web Inspector（Web 检查器）。幸运的是，iOS 9 的远程调试完全兼容 Mac OS 上的 Safari 8，所以你倒是不用急着升级你的 Mac OS</li>
<li>iOS 9 通过 <code>-apple-font</code> 加入了一些 Dynamic Fonts（动态字体），并且它们现在应用的是 Apple 的新字体：San Francisco，笔者的博客就已经用上它啦</li>
<li>scrollingElement 现在可用了</li>
<li><code>&lt;input type=file&gt;</code> 现在允许你从 iCloud Drive 与已安装的第三方应用，比如 Google Drive 中选择文件</li>
</ul>
<img src="http://www.mobilexweb.com/wp-content/uploads/2015/09/IMG_2017.png" alt="input file" width="320">

<ul>
<li>当你加载一个 HTTPS 协议的页面时，你不能混用 HTTP 与 HTTPS 的资源</li>
</ul>
<h2 id="Bugs"><a href="#Bugs" class="headerlink" title="Bugs"></a>Bugs</h2><p>Bug 通常都要在几周之后才会显露出来，我也会持续跟进并更新这篇文章。目前为止，我的发现如下：</p>
<ul>
<li>对于 Home Screen webapps（添加至主屏的 web 应用），<code>apple-mobile-web-app-status-bar-style</code> 这个 meta 标签不起作用了！所以你现在不能再像过去一样使用 <code>black-translucent</code> 让你的 webapp 渲染在状态栏的后面了。（iOS 9.2 fixed 了这个 bug）</li>
<li>Speech Synthesis API （语音综合 API）不再工作了</li>
</ul>
<h2 id="仍在等待……"><a href="#仍在等待……" class="headerlink" title="仍在等待……"></a>仍在等待……</h2><p>当 Mac 上的 Safari、桌面电脑与 Android 上的 Chrome 都已经为网站支持 Push Notification （通知推送）时，iOS 上的 Safari 仍然不支持这个特性。就 API 而言，我们仍然没有：WebRTC、getUserMedia、Service Worker、FileSystem API、Network Information API、Battery Status API、Vibration API 等等……你又在 iOS 上等待哪些特性呢？ </p>
<h2 id="watchOS-与-tvOS"><a href="#watchOS-与-tvOS" class="headerlink" title="watchOS 与 tvOS"></a>watchOS 与 tvOS</h2><p>新发布的 watchOS 2.0 与 tvOS 9.0 都是基于 iOS 的操作系统，它们针对特定的设备发行（Apple Watch 与新的 Apple TV）。从用户的角度来说，那里并没有浏览器了。从开发者的角度，那里也没有 Webview 了。</p>
<p>尽管有不少人抱怨（大部分都是针对 webview 的缺失），我并不能确定这是不是个坏主意。我猜测 Apple 会尝试通过 Siri 来将 “web” 带给 TV、手表、甚至 CarPlay 的用户。所以，如果你遵循了上述的 “App Search” 的步骤，你的内容将可能通过 Siri 在这些设备上以 widget（小部件）或者快捷回复的形式变得可以访问。</p>
<p>对于 Apple TV ，它支持使用 JavaScript、DOM API 与 XMLHttpRequest 来让我们构建某种类似 Client-Server webapp 的东西。没有 HTML 和 CSS，这是什么把戏？其实它支持的叫 TVML，是一种基于 XML、为那些可以被渲染在 TV 屏幕上的特定内容而优化后的标签。这些标签只可以在来自应用商店的 native app 中渲染，但是这些 TVML 是由服务器端来生成的。</p>
<h2 id="著作权声明"><a href="#著作权声明" class="headerlink" title="著作权声明"></a>著作权声明</h2><p>本文译自 <a href="http://www.mobilexweb.com/blog/ios9-safari-for-web-developers" target="_blank" rel="noopener">iOS 9, Safari and the Web: 3D Touch, new Responsive Web Design, Native integration and HTML5 APIs — Breaking the Mobile Web</a><br>译者 <a href="http://weibo.com/huxpro" target="_blank" rel="noopener">黄玄</a>，首次发布于 <a href="http://huangxuan.me" target="_blank" rel="noopener">Hux Blog</a>，转载请保留以上链接</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/10/28/2015-10-28-how-designer-learn-fe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/10/28/2015-10-28-how-designer-learn-fe/" class="post-title-link" itemprop="url">「知乎」设计师如何学习前端？</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-10-28 12:00:00" itemprop="dateCreated datePublished" datetime="2015-10-28T12:00:00+08:00">2015-10-28</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-04 11:56:32" itemprop="dateModified" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>这篇文章转载自<a href="https://www.zhihu.com/question/21921588/answer/69680480" target="_blank" rel="noopener">我在知乎上的回答</a>，也被刊登于<a href="http://www.uisdc.com/head-first-front-end" target="_blank" rel="noopener">优秀网页设计</a>等多个网站上 ;)</p>
</blockquote>
<p>笔者的经历在知乎就可以看到，大学专业是数字媒体艺术，大一实习过动效设计师，大二拿到了人生第一个大公司 offer 是阿里的交互设计，后来转岗到淘宝旅行的前端团队，现在在微信电影票做前端研发。<br><br><br><br>也是走过了不少野路子，不过还好有小右哥 <a data-hash="cfdec6226ece879d2571fbc274372e9f" href="//www.zhihu.com/people/cfdec6226ece879d2571fbc274372e9f" class="member_mention" data-editable="true" data-title="@尤雨溪" data-tip="p$b$cfdec6226ece879d2571fbc274372e9f">@尤雨溪</a> 这样艺术/设计转前端的大神在前面做典范，也证明这条路是玩的通的 ;)<br><br><br><br>接下来就说说自己的学习建议吧，一个小教程，也是自己走过的流程，仅供参考哈<br><br><br><br>————<br><br><br><br><b>背景篇</b><br><br><br><br>在这个时代学习新东西，一定要善于使用 Bing/Google 等搜索引擎…网络上的资源非常丰富，自学能力也尤为重要，尤其是对于学习技术！<br><br><br><br><br><br><br><br><b>入门篇（HTML/CSS）</b><br><br><br><br>说起设计师希望学前端的初衷，大概还是因为各种华丽的网页特效/交互太过吸引人，这种感觉大概就是：“Hey，我的设计可以做成网页访问了呢！”<br><br>好在，“展示”对于前端技术来说反而是最简单的部分。所以，放下你对“编程”两个字的恐惧，<b>从“称不上是编程语言”的 HTML/CSS 开始，先做点有成就感的东西出来吧！</b><br><br><br><br>对于设计师来说，最有成就感的一定是“可以看到的东西”，而 HTML/CSS 正是用来干这个的，HTML 就是一堆非常简单的标签，而 CSS 无非就是把你画画的流程用<b>英语</b>按一定的格式写出来而已：<br><br></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> p is paragraph! <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">p &#123; color: red;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>是不是非常容易，就跟读英语一样！<br><br>接下来，你就需要开始自学啦，比如常用 HTML 标签的意思，各种 CSS 的属性，还有 CSS 的盒模型、优先级、选择器……放心，它们都很容易；能玩得转 PS/AI/Flash/Axure/AE/Sketch 的设计师们，学这个洒洒水啦<br><br><br><br>推荐几个资源：<br><br></p>
<ul>
    <li><a href="//link.zhihu.com/?target=http%3A//www.w3school.com.cn/" class=" wrap external" target="_blank" rel="nofollow noreferrer">w3school 在线教程<i class="icon-external"></i></a> (中文，一个很 Low 但是又很好的入门学习网站）
        <br>
    </li>
    <li><a href="//link.zhihu.com/?target=http%3A//www.codecademy.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Learn to code<i class="icon-external"></i></a> (Codecademy，如果你英文 OK，<b>强烈建议</b>你使用它进行交互式的学习！里面从 HTML/CSS 到搭建网站的课程都有，免费，生动直观）
        <br>
    </li>
</ul>
<br><b>这个阶段的练习主要是“临摹”：用代码画出你想画的网站，越多越好。</b>
<br>
<br>对于书，我<b>非常不推荐</b>上来就去看各种厚厚的入门/指南书，没必要！这一个阶段应该快速上手，培养兴趣，培养成就感。先做出可以看的东西再说，掌握常用的 HTML/CSS 就够用了
<br>
<br>如果完成的好，这个阶段过后你大概就可以写出一些简单又好看的“静态网页”了，比如这个作品集/简历：<a href="//link.zhihu.com/?target=http%3A//huangxuan.me/portfolio/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Portfolio - 黄玄的博客<i class="icon-external"></i></a> （好久没更新了…丢人现眼）
<br>
<br>
<br>
<br><b>入门篇（JavaScript/jQuery）</b>
<br>
<br>想要在网页上实现一些交互效果，比如轮播图、点击按钮后播放动画？那你就必须要开始学习 JavaScript 了！JavaScript 是一门完整、强大并且非常热门的编程语言，你在浏览器里看到的所有交互或者高级功能都是由它在背后支撑的！
<br>
<br>举个小栗子：
<br>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">"Hello World!"</span>)</span><br></pre></td></tr></table></figure>

<p>就这一行，就可以在浏览器里弹出 Hello World 啦！<br><br><br><br>在了解一些基础的 JavaScript 概念（变量、函数、基本类型）后，我们可以直接去学习 jQuery，你不用知道它具体是什么（它是一个 JavaScript 代码库），你只要知道它可以显著地降低你编写交互的难度就好了：<br><br></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.className'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"Hello jQuery"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>通过 jQuery，我们可以继续使用在 CSS 中学到的“选择器”<br><br><br><br>对于没有编程基础的人来说，想要完全掌握它们两并不容易。作为设计师，很多时候我们可以先不必深究它们的原理，而是尝试直接应用它！这样成就感会来得很快，并且你可以通过实际应用更加理解 JavaScript 是用来做什么的。<br><br><br><br>我仍然推荐你使用 <a href="http://www.w3school.com.cn/" target="_blank" rel="nofollow noreferrer">w3school 在线教程</a> 与 <a href="//www.codecademy.com/" target="_blank">http://www.codecademy.com/</a> 进行学习。另外，你可以看一看诸如《<a href="//link.zhihu.com/?target=http%3A//book.douban.com/subject/10792216/" class=" wrap external" target="_blank" rel="nofollow noreferrer">锋利的jQuery (豆瓣)<i class="icon-external"></i></a>》 这一类非常实用的书籍，可以让你很快上手做出一些简单的效果来！<br><br><br><br>如果学习得顺利，你还可以尝试使用各种丰富的 jQuery 插件，你会发现写出支持用户交互的网站也没有那么困难～很多看上去很复杂的功能（比如轮播图、灯箱、下拉菜单），搜一搜然后看看文档（教程）、改改示例代码就好了。<br><br><br><br>比如说，配合 <a href="//link.zhihu.com/?target=https%3A//github.com/Huxpro/jquery.HSlider" class=" wrap external" target="_blank" rel="nofollow noreferrer">Huxpro/jquery.HSlider · GitHub<i class="icon-external"></i></a> 这样的轮播图插件，你可以很轻松的写出 <a href="//link.zhihu.com/?target=http%3A//huangxuan.me/jquery.HSlider/" class=" wrap external" target="_blank" rel="nofollow noreferrer">HSlider | Demo<i class="icon-external"></i></a> 这样的网页相册或者 <a href="//link.zhihu.com/?target=http%3A//huangxuan.me/jquery.HSlider/demo-weather-app/" class=" wrap external" target="_blank" rel="nofollow noreferrer">HSlider | Weather<i class="icon-external"></i></a> 这样的手机端 App 原型～<br><br><br><br>最后，我想推荐下 <a href="//link.zhihu.com/?target=http%3A//getbootstrap.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Bootstrap · The world’s most popular mobile-first and respons<i class="icon-external"></i></a> ，这是世界上最知名的前端 UI 框架之一，提供了大量 CSS 样式与 jQuery 插件。它非常容易学习并且中英文教程都非常健全，你并不需要理解它背后的工作原理就能很好的使用它，让你快速达到“可以建站的水平”。有余力的话，你不但可以学习如何使用它，还可以学习它背后的设计思想。<br><br><br><br><br><br><br><br><b>转职方向一：前端重构 （Web Rebuild）</b><br><br><br><br>业内通常把专精 HTML/CSS 的前端从业人员称为重构，而对于注重视觉效果的设计师来说，在掌握基本的 HTML/CSS 后，就可以朝着这个方向发展了。<br><br><br><br><b>到了这个阶段，你不但要知道怎么写页面，还要知道它们都是为什么，并且知道怎么做更好。这对你理解 Web 世界非常有帮助，并且能帮助你做出更“系统化”的设计。</b><br><br><br><br>CSS 的学问很多，你需要开始理解文档流、浮动流等各种定位的方式与原理，理解 CSS 的继承复用思想、理解浏览器的差异、兼容、优雅降级……这里强烈推荐一本书：《<a href="//link.zhihu.com/?target=http%3A//book.douban.com/subject/4736167/" class=" wrap external" target="_blank" rel="nofollow noreferrer">精通CSS（第2版） (豆瓣)<i class="icon-external"></i></a>》，虽然前端技术突飞猛进，但这本书的思想永远不会过时。<br><br><br><br>HTML 方面，要开始注重语义化、可访问性与结构的合理，你要开始学习“结构与样式的分离”，这里有一本神书将这种分离做到了极致：《<a href="//link.zhihu.com/?target=http%3A//book.douban.com/subject/2052176/" class=" wrap external" target="_blank" rel="nofollow noreferrer">CSS禅意花园 (豆瓣)<i class="icon-external"></i></a>》<br><br><br><br>另外，各种炫酷屌的 CSS 3 属性你一定会喜欢：你可以用媒体查询做响应式网页设计，你可以用 transiton 和 animation 做补间动画与关键帧动画，用 transform 做缩放、旋转、3D变换，还有圆角、渐变、阴影、弹性盒！样样都是设计师的神器！<br><br><br><br>如果你还掌握了 <b>入门篇（JavaScript/jQuery）</b>的知识，那么<b>恭喜你！你已经可以做出很多有趣的网页了！</b>很多 minisite 或者微信上的“H5” 小广告，这个程度的你已经可以轻松完成了！<br><br><br><br>配合上你的设计功力，你可以开始尝试创作一些好玩的东西，比如这种富含交互和动画的网站 <a href="//link.zhihu.com/?target=http%3A//huangxuan.me/senova/" class=" wrap external" target="_blank" rel="nofollow noreferrer">绅宝 SENOVA<i class="icon-external"></i></a> ，它仍然是基于 <a href="//link.zhihu.com/?target=https%3A//github.com/Huxpro/jquery.HSlider" class=" wrap external" target="_blank" rel="nofollow noreferrer">Huxpro/jquery.HSlider · GitHub<i class="icon-external"></i></a> 实现的！或者给自己做个小小的个人网站试试<br><br><br><br><br><br><br><br><b>转职方向二：前端工程师（Front-end Engineer）</b><br><br><br><br>如果你觉得上述的这些都还满足不了你，你渴望做出更多了不起的交互，甚至你已经喜欢上了编程，想要转行做工程师，或者成为一名全栈设计师，那么你可以朝着这个方向继续发展！<br><br><br><br>这个阶段的最大难度，是你必须<b>学会像一名软件工程师一样思考</b>。你需要踏踏实实学习编程语言，深入理解作用域、对象、类、封装、继承、面向对象编程、事件侦听、事件冒泡等一大堆编程概念，你还需要了解浏览器，学习 DOM、BOM、CSSOM 的 API，你甚至还需要学习一些网络原理，包括域名、URL、DNS、HTTP 请求都是什么…<br><br><br><br>你可能会被这一大堆名词吓到。确实，想要搞定他们并不容易。但是，你要相信只要你肯花功夫它们也没有那么难，而更重要的是，如果你能拿下他们，你所收获的并不只是这些而已，而是真正跨过了一道大坎 —— <b>你的世界将因此打开， 你看待世界的方式将因此改变</b><br><br><br><br>对于这个阶段，你可以继续在 <a href="//www.codecademy.com/" target="_blank">http://www.codecademy.com/</a> 上学习，但是 w3school 已经不够用了，遇到不会的语法，我推荐你查阅 <a href="//link.zhihu.com/?target=https%3A//developer.mozilla.org/zh-CN/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Mozilla 开发者网络<i class="icon-external"></i></a>，这是少数中英文都有的非常专业且友好的网站。<br><br><br><br>同时，你可能需要看一些书本来帮助你学习 JavaScript ：<br><br></p>
<ul>
    <li> 《<a href="//link.zhihu.com/?target=http%3A//book.douban.com/subject/10546125/" class=" wrap external" target="_blank" rel="nofollow noreferrer">JavaScript高级程序设计（第3版） (豆瓣)<i class="icon-external"></i></a> 》或 《<a href="//link.zhihu.com/?target=http%3A//book.douban.com/subject/2228378/" class=" wrap external" target="_blank" rel="nofollow noreferrer">JavaScript权威指南 (豆瓣)<i class="icon-external"></i></a>》，大而全的书只需要一本就够了</li>
    <li>如果上面这本你觉得太难，你可以先看 《<a href="//link.zhihu.com/?target=http%3A//book.douban.com/subject/6038371/" class=" wrap external" target="_blank" rel="nofollow noreferrer">JavaScript DOM编程艺术 （第2版） (豆瓣)<i class="icon-external"></i></a>》来过渡一下，这本书比较容易，它会教给你 “优雅降级、渐进增强”的优秀思想</li>
</ul>
<br>如果你能顺利得渡过了这个阶段，我想你已经能做出很多令你自豪的网站了！试着向身边的工程师朋友询问如何购买域名、配置简单的静态服务器，或者搜搜“Github Pages”，然后把你的作品挂在网络上让大家欣赏吧！
<br>
<br>你还可以试着用 JavaScript 写写小游戏，这不但能锻炼你的编程水平还非常有趣～比如这是我刚学 JS 不久后 hack 一晚的产物 —— 用 DOM 实现的打飞机：<a href="//link.zhihu.com/?target=http%3A//huangxuan.me/aircraft" class=" wrap external" target="_blank" rel="nofollow noreferrer">Hux - Aircraft<i class="icon-external"></i></a> （不支持手机）
<br>
<br>
<br>
<br><b>入行篇</b>
<br>
<br>如果你能完成上述所有的学习，你已经是一名非常出色的前端学徒了！对于只是想要丰富技能的设计师或者产品经理来说，接下来的内容可能会让你感到不适 ;(
<br>但如果你铁了心想要真正入行进入大公司从事专职前端开发的工作，那么你可以接着往下看：
<br>
<br>近几年的前端技术发展迅猛，前端工程师早已不是切切图写写页面做点特效就完事的职位，你需要具备相当完善的工程师素质与计算机知识，成为一名真正的工程师。
<br>
<br><b>你需要非常了解 JavaScript 这门语言</b>，包括 闭包、IIFE、this、prototype 及一些底层实现（ES、VO、AO）、熟悉常用的设计模式与 JavaScript 范式（比如实现类与私有属性）。另外，新的 ES6 已经问世，包括 class, module, arrow function 等等
<br>
<br><b>你需要非常了解前端常用的网络及后端知识</b>，包括 Ajax、JSON、HTTP 请求、GET/POST 差异、RESTful、URL hash/query、webSocket、常用的跨域方式（JSONP/CORS、HTTP 强缓存/协商缓存，以及如何利用 CDN 、静态网站/动态网站区别、服务器端渲染/前端渲染区别等等
<br>
<br><b>你需要学习使用进阶的 CSS</b>，包括熟悉 CSS 3，使用 Scss/Less 等编译到 CSS 的语言，使用 autoprefixer 等 PostCSS 工具，了解 CSS 在 Scope/Namespace 上的缺陷，你还可以学习 CSS Modules、CSS in JS 这些有趣的新玩意
<br>
<br><b>你需要非常了解前端的模块化规范</b>，可能在你学习到这里的时候，Require.js/AMD 已经再见了，但是 CommonJS 与 ES6 Modules 你必须要了解。（你可以观看我的分享《<a href="//link.zhihu.com/?target=http%3A//huangxuan.me/js-module-7day/%23/" class=" wrap external" target="_blank" rel="nofollow noreferrer">JavaScript Modularization Seven Day<i class="icon-external"></i></a>》 来学习 JS 模块化的历史）
<br>
<br><b>你需要熟悉 Git 与 Shell 的使用</b>，包括基于 git 的版本管理、分支管理与团队协作，包括简单的 Linux/Unix 命令、你要知道大部分程序员的工作可以通过 shell 更快更酷的完成，并且很多“软件”只能通过 shell 来使用。你还可以把你的代码放到 github 上与人分享，并且学习 github 上其他优秀的开源代码
<br>
<br><b>你需要熟悉并且习惯使用 Node</b>，包括了解 npm、使用 Grunt/Gulp/Browserify/Webpack 优化你的工作流、对你的代码进行打包、混淆、压缩、发布，你还可以使用 Express/Koa 配合 MongoDB/Redis 涉足到后端领域，或者尝试用 Node 做后端渲染优化你的首屏体验
<br>
<br><b>你需要了解各种 HTML 5 的新 API</b>，包括 &lt;video&gt;/&lt;audio&gt;，包括 Canvas，webGL、File API、App Cache、localStorage、IndexedDB、Drag &amp; Drop、更高级的 DOM API、Fetch API 等等
<br>
<br><b>你需要学习 JavaScript 的单线程与异步编程方法</b>，因为它们非常非常常用、包括 setTimeout/setInterval，回调与回调地狱、事件与event loop、还有 Promise 甚至 Async/Await
<br>
<br><b>你需要非常了解浏览器</b>，包括主流浏览器的名称、内核与差异、包括私有属性与 -webkit- 等厂商前缀，你需要学习如何使用 Chrome DevTool，你需要了解浏览器渲染的 reflow/repaint 来避免 Jank 并进行有针对性的性能优化
<br>
<br><b>你需要专门学习 Mobile Web</b>，因为移动互联网是趋势。包括 viewport、CSS pixel、 touch 事件、iOS/Android 浏览器的差异与兼容、移动端的性能优化、300ms delay 等等…你还需要知道 Hybrid 是什么，包括 Cordova/Phonegap，更复杂的比如和 iOS/Android 通信的机制，比如 URI Scheme 或者 JS Bridge
<br>
<br><b>你需要学习一些</b><b>非常火热的前端框架/库</b>，他们不但能帮助你更快的进行开发、更重要的是他们背后所蕴含的思想。包括 Backbone、Angular、Vue、React、Polymer 等等、了解它们背后的双向数据绑定、单向数据流、MVC/MVVM/Flux 思想、Web Component 与组件化等等
<br>
<br><b>你需要学习如何构建 web 单页应用</b>，这是 web 的未来，包括利用 history API 或者 hash 实现路由，包括基于 Ajax + 模版引擎或者其他技术的前端渲染、包括组织较为复杂的软件设计等等
<br>
<br><b>我还建议你学习更多的计算机知识</b>，它们能对你的代码能起到潜移默化的作用，包括简单的计算机体系结构、更广泛的编程知识（面向对象/函数式等）、栈、堆、数组、队列、哈希表、树、图等数据结构、时间复杂度与空间复杂度以及简单的算法等等
<br>
<br><b>你需要了解业内的大神并阅读它们的博客/知乎/微博</b>，比如 <a data-hash="cfdec6226ece879d2571fbc274372e9f" href="//www.zhihu.com/people/cfdec6226ece879d2571fbc274372e9f" class="member_mention" data-editable="true" data-title="@尤雨溪" data-tip="p$b$cfdec6226ece879d2571fbc274372e9f">@尤雨溪</a><a data-hash="3ec3b166992a5a90a1083945d2490d38" href="//www.zhihu.com/people/3ec3b166992a5a90a1083945d2490d38" class="member_mention" data-editable="true" data-title="@贺师俊" data-tip="p$b$3ec3b166992a5a90a1083945d2490d38">@贺师俊</a><a data-hash="3212f9044005e9306aab1b61e74e7ae6" href="//www.zhihu.com/people/3212f9044005e9306aab1b61e74e7ae6" class="member_mention" data-editable="true" data-title="@张云龙" data-tip="p$b$3212f9044005e9306aab1b61e74e7ae6">@张云龙</a><a data-hash="c5198d4e9c0145aee04dd53cc6590edd" href="//www.zhihu.com/people/c5198d4e9c0145aee04dd53cc6590edd" class="member_mention" data-editable="true" data-title="@徐飞" data-tip="p$b$c5198d4e9c0145aee04dd53cc6590edd">@徐飞</a><a data-hash="20fdd386a6e59d178b8fe14e2863cb40" href="//www.zhihu.com/people/20fdd386a6e59d178b8fe14e2863cb40" class="member_mention" data-editable="true" data-title="@张克军" data-tip="p$b$20fdd386a6e59d178b8fe14e2863cb40">@张克军</a><a data-hash="c11336b8607d86bc9090bed90757a34c" href="//www.zhihu.com/people/c11336b8607d86bc9090bed90757a34c" class="member_mention" data-editable="true" data-title="@玉伯" data-tip="p$b$c11336b8607d86bc9090bed90757a34c">@玉伯</a><a data-hash="64458d15a75902cd0425732b7b757705" href="//www.zhihu.com/people/64458d15a75902cd0425732b7b757705" class="member_mention" data-editable="true" data-title="@拔赤" data-tip="p$b$64458d15a75902cd0425732b7b757705">@拔赤</a><a data-hash="0d9b98af12015c94cff646a6fc0773b5" href="//www.zhihu.com/people/0d9b98af12015c94cff646a6fc0773b5" class="member_mention" data-editable="true" data-title="@寸志" data-tip="p$b$0d9b98af12015c94cff646a6fc0773b5">@寸志</a><a data-hash="790dccce26904cdcd11b0fad3bac37b7" href="//www.zhihu.com/people/790dccce26904cdcd11b0fad3bac37b7" class="member_mention" data-editable="true" data-title="@题叶" data-tip="p$b$790dccce26904cdcd11b0fad3bac37b7">@题叶</a><a data-hash="85de6407f2219137df29b4249b91cfd5" href="//www.zhihu.com/people/85de6407f2219137df29b4249b91cfd5" class="member_mention" data-editable="true" data-title="@郭达峰" data-tip="p$b$85de6407f2219137df29b4249b91cfd5">@郭达峰</a> 等等等等，很多思想和新东西只有从他们身上才能学到。我还推荐你多参加技术交流会，多认识一些可以一起学习的小伙伴，你们可以互相交流并且一起成长
<br>
<br><b>你需要具备很强的自学能力、对技术有热情并且不断跟进</b>。因为 JavaScript/前端的社区非常非常活跃，有太多的新东西需要你自己来发现与学习：比如 Universal JavaScript、Isomorphic JavaScript、前端测试、HTML5 页游、WebRTC、WebSocket、CSS 4、SVG、HTTP/2、ES 7、React Native、Babel、TypeScript、Electron 等等等等…
<br>
<br>
<br>虽然一下扯得有点多，但这些确实就是你未来将会遇到的。你并不需要全部掌握它们，但是却多多益善；你也可以专精在某几个方面，这已经足以让你成为非常专业的前端工程师。
<br>
<br><b>所以，如果你自认为涵盖了上述要求的 40%，欢迎简历发 huangxuan@wepiao.com ，实习/全职皆可～</b>
<br>
<br>
<br>咦，这个结尾怪怪的……








          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/09/22/2015-09-22-js-version/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/09/22/2015-09-22-js-version/" class="post-title-link" itemprop="url">「译」ES5, ES6, ES2016, ES.Next: JavaScript 的版本是怎么回事？</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-09-22 00:00:00" itemprop="dateCreated datePublished" datetime="2015-09-22T00:00:00+08:00">2015-09-22</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-04 11:56:32" itemprop="dateModified" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>JavaScript 有着很奇怪的命名史。</p>
<p>1995 年，它作为网景浏览器（Netscape Navigator）的一部分首次发布，网景给这个新语言命名为 LiveScript。一年后，为了搭上当时媒体热炒 Java 的顺风车，临时改名为了 JavaScript <em>（当然，Java 和 JavaScript 的关系，就和雷锋和雷锋塔一样 —— 并没有什么关系）</em></p>
<p><img src="/img/in-post/post-js-version/javascript-java.jpg" alt="java-javascript"><br><small class="img-hint">歪果仁的笑话怎么一点都不好笑</small></p>
<blockquote>
<p>译者注：<a href="https://en.wikipedia.org/wiki/JavaScript#History" target="_blank" rel="noopener">wikipedia 的 JavaScript 词条</a> 更详细的叙述了这段历史</p>
</blockquote>
<p>1996 年，网景将 JavaScript 提交给 <a href="http://www.ecma-international.org/" target="_blank" rel="noopener">ECMA International（欧洲计算机制造商协会）</a> 进行标准化，并最终确定出新的语言标准，它就是 ECMAScript。自此，ECMAScript 成为所有 JavaScript 实现的基础，不过，由于 JavaScript 名字的历史原因和市场原因（很显然 ECMAScript 这个名字并不令人喜欢……），现实中我们只用 ECMAScript 称呼标准，平时都还是使用 JavaScript 来称呼这个语言。</p>
<blockquote>
<p>术语（译者注）：</p>
<ul>
<li><em>标准（Standard）</em>： 用于定义与其他事物区别的一套规则</li>
<li><em>实现（Implementation）</em>： 某个标准的具体实施/真实实践</li>
</ul>
</blockquote>
<p>不过，JavaScript 开发者们并不怎么在乎这些，因为在诞生之后的 15 年里，ECMAScript 并没有多少变化，而且现实中的很多实现都已经和标准大相径庭。其实在第一版的 ECMAScript 发布后，很快又跟进发布了两个版本，但是自从 1999 年 ECMAScript 3 发布后，十年内都没有任何改动被成功添加到官方规范里。取而代之的，是各大浏览器厂商们争先进行自己的语言拓展，web 开发者们别无选择只能去尝试并且支持这些 API。即使是在 2009 年 ECMAScript 5 发布之后，仍然用了数年这些新规范才得到了浏览器的广泛支持，可是大部分开发者还是写着 ECMAScript 3 风格的代码，并不觉得有必要去了解这些规范。</p>
<blockquote>
<p>译者注：<a href="https://en.wikipedia.org/wiki/ECMAScript#4th_Edition_.28abandoned.29" target="_blank" rel="noopener">ECMAScript 第四版草案</a>由于太过激进而被抛弃，Adobe 的 <a href="https://en.wikipedia.org/wiki/ActionScript" target="_blank" rel="noopener">ActionScript 3.0</a> 是 ECMAScript edition 4 的唯一实现（ Flash 差点就统一 Web 了）</p>
</blockquote>
<p>到了 2012 年，事情突然开始有了转变。大家开始推动停止对旧版本 IE 浏览器的支持，用 ECMAScript 5 (ES5) 风格来编写代码也变得更加可行。与此同时，一个新的 ECMAScript 规范也开始启动。到了这时，大家开始逐渐习惯以对 ECMAScript 规范的版本支持程度来形容各种 JavaScript 实现。在正式被指名为 ECMAScript 第 6 版 (ES6) 之前，这个新的标准原本被称为 ES.Harmony（和谐）。2015 年，负责制定 ECMAScript 规范草案的委员会 TC39 决定将定义新标准的制度改为一年一次，这意味着每个新特性一旦被批准就可以添加，而不像以往一样，规范只有在整个草案完成，所有特性都没问题后才能被定稿。因此，ECMAScript 第 6 版在六月份公布之前，又被重命名为了 ECMAScript 2015（ES2015）</p>
<p>目前，仍然有很多新的 JavaScript 特性或语法正在提议中，包括 <a href="https://github.com/wycats/javascript-decorators" target="_blank" rel="noopener">decorators（装饰者）</a>，<a href="https://github.com/lukehoban/ecmascript-asyncawait" target="_blank" rel="noopener">async-await（async-await 异步编程模型）</a> 和 <a href="https://github.com/jeffmo/es-class-properties" target="_blank" rel="noopener">static class properties（静态类属性）</a>。它们通常被称为 ES7，ES2016 或者 ES.Next 的特性，不过实际上它们只能被称作提案或者说可能性，毕竟 ES2016 的规范还没有完成，有可能全部都会引入，也有可能一个都没有。TC39 把一个提案分为 4 个阶段，你可以在 <a href="https://babeljs.io/docs/usage/experimental/" target="_blank" rel="noopener">Babel 的官网</a> 上查看各个提案目前都在哪个阶段了。</p>
<p>所以，我们该如何使用这一大堆术语呢？下面的列表或许能帮助到你：</p>
<ul>
<li><strong>ECMAScript</strong>：一个由 ECMA International 进行标准化，TC39 委员会进行监督的语言。通常用于指代标准本身。</li>
<li><strong>JavaScript</strong>：ECMAScript 标准的各种实现的最常用称呼。这个术语并不局限于某个特定版本的 ECMAScript 规范，并且可能被用于任何不同程度的任意版本的 ECMAScript 的实现。</li>
<li><strong>ECMAScript 5 (ES5)</strong>：ECMAScript 的第五版修订，于 2009 年完成标准化。这个规范在所有现代浏览器中都相当完全的实现了。</li>
<li><strong>ECMAScript 6 (ES6) / ECMAScript 2015 (ES2015)</strong>：ECMAScript 的第六版修订，于 2015 年完成标准化。这个标准被部分实现于大部分现代浏览器。可以查阅<a href="http://kangax.github.io/compat-table/es6/" target="_blank" rel="noopener">这张兼容性表</a>来查看不同浏览器和工具的实现情况。</li>
<li><strong>ECMAScript 2016</strong>：预计的第七版 ECMAScript 修订，计划于明年夏季发布。这份规范具体将包含哪些特性还没有最终确定</li>
<li><strong>ECMAScript Proposals</strong>：被考虑加入未来版本 ECMAScript 标准的特性与语法提案，他们需要经历五个阶段：Strawman（稻草人），Proposal（提议），Draft（草案），Candidate（候选）以及 Finished （完成）。</li>
</ul>
<p>在这整个 Blog 中，我将把目前的 ECMAScript 版本称作 ES6（因为这是大部分开发者最习以为常的），把明年的规范称作 ES2016（因为，与 ES6/ES2015 不同，这个名字将在整个标准化过程中沿用）并且将那些还没有成为 ECMAScript 定稿或草案的未来语言概念称为 ECMAScript 提案或者 JavaScript 提案。我将尽我所能在任何可能引起困惑的场合沿用这篇文章。</p>
<h4 id="一些资源"><a href="#一些资源" class="headerlink" title="一些资源"></a>一些资源</h4><ul>
<li>TC39 的 <a href="https://github.com/tc39/ecma262" target="_blank" rel="noopener">Github 仓库</a>上可以看到所有目前公开的提案</li>
<li>如果你还不熟悉 ES6，Babel 有一个<a href="https://babeljs.io/docs/learn-es2015/" target="_blank" rel="noopener">很不错的特性概览</a></li>
<li>如果你希望深入 ES6，这里有两本很不错的书： Axel Rauschmayer 的 <a href="http://exploringjs.com/" target="_blank" rel="noopener">Exploring ES6</a>和 Nicholas Zakas 的 <a href="https://leanpub.com/understandinges6" target="_blank" rel="noopener">Understanding ECMAScript 6</a>。Axel 的博客 <a href="http://www.2ality.com/" target="_blank" rel="noopener">2ality</a> 也是很不错的 ES6 资源</li>
</ul>
<img class="shadow" width="320" src="/img/in-post/post-js-version/keep-calm-and-learn-javascript.png">
<small class="img-hint">来学 JavaScript 吧！</small>

<h4 id="著作权声明"><a href="#著作权声明" class="headerlink" title="著作权声明"></a>著作权声明</h4><p>本文译自 <a href="http://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning/" target="_blank" rel="noopener">ES5, ES6, ES2016, ES.Next: What’s going on with JavaScript versioning?</a><br>译者 <a href="http://weibo.com/huxpro" target="_blank" rel="noopener">黄玄</a>，首次发布于 <a href="http://huangxuan.me" target="_blank" rel="noopener">Hux Blog</a>，转载请保留以上链接</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/07/09/2015-07-09-js-module-7day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/07/09/2015-07-09-js-module-7day/" class="post-title-link" itemprop="url">JavaScript 模块化七日谈</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-07-09 00:00:00" itemprop="dateCreated datePublished" datetime="2015-07-09T00:00:00+08:00">2015-07-09</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-04 11:56:32" itemprop="dateModified" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>下滑这里查看更多内容</p>
</blockquote>
<p>7月9日，我在公司内部进行了名为「JavaScript 模块化七日谈」分享，并将该 Slides 分享到了微博上。出乎意料地，这篇微博先后被 @JS小组 @尤小右 @寸志 等近 200 人转发，阅读达到 10w，获得了还不错的评价。</p>
<p>于是，我决定将它重新发到我的博客上，并为它专门制作了适用于 Keynote 展示文稿的新布局。它能自动根据屏幕大小/旋转以一定比例填充屏幕，你也可以直接点击下方链接在新页面打开，来获得更好的、沉浸式的全屏体验</p>
<h3 id="Watch-Fullscreen-→"><a href="#Watch-Fullscreen-→" class="headerlink" title="Watch Fullscreen →"></a><a href="https://huangxuan.me/js-module-7day/" target="_blank" rel="noopener">Watch Fullscreen →</a></h3><div class="visible-md visible-lg">
<img src="//huangxuan.me/js-module-7day/attach/qrcode.png" width="350">
<small class="img-hint">你也可以通过扫描二维码在手机上观看</small>
</div>


<p>这个 Web Slides 开源在<a href="https://github.com/Huxpro/js-module-7day" target="_blank" rel="noopener">我的 Github 上</a>，欢迎你帮助我完善这个展示文稿，你可以给我提 issue，可以 fork &amp; pull request。如果它能帮助到你了，希望你还能不吝啬 star 一下这个项目</p>
<h3 id="Catalog"><a href="#Catalog" class="headerlink" title="Catalog"></a>Catalog</h3><ul>
<li>第一日 上古时期 <strong><em>Module?</em></strong> 从设计模式说起</li>
<li>第二日 石器时代 <strong><em>Script Loader</em></strong> 只有封装性可不够，我们还需要加载</li>
<li>第三日 蒸汽朋克 <strong><em>Module Loader</em></strong> 模块化架构的工业革命</li>
<li>第四日 号角吹响 <strong><em>CommonJS</em></strong> 征服世界的第一步是跳出浏览器</li>
<li>第五日 双塔奇兵 <strong><em>AMD/CMD</em></strong> 浏览器环境模块化方案</li>
<li>第六日 精灵宝钻 <strong><em>Browserify/Webpack</em></strong> 大势所趋，去掉这层包裹！</li>
<li>第七日 王者归来 <strong><em>ES6 Module</em></strong> 最后的战役</li>
</ul>
<h3 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h3><p><a href="http://lab.hakim.se/reveal-js" target="_blank" rel="noopener">Reveal.js</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/06/15/2015-06-15-alitrip-strategy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/06/15/2015-06-15-alitrip-strategy/" class="post-title-link" itemprop="url">聊聊「阿里旅行 · 去啊」—— 行业与战略 </a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-06-15 00:00:00" itemprop="dateCreated datePublished" datetime="2015-06-15T00:00:00+08:00">2015-06-15</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-04 11:56:32" itemprop="dateModified" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>本篇为该系列第一篇 —— 行业与战略，让我们聊聊行业、战略与格局。</p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>近几年，互联网产品从线上斗到了线下，互联网行业和传统行业的跨界融合屡见不鲜，“渗透传统行业”几乎成为了全行业下一轮创新的标配，新词“互联网+”也应运而生：</p>
<blockquote>
<p>将互联网行业的生产要素，深度融入经济、社会等各个领域，尝试改变一些传统的实体经济行业，创造出新的产品形态、商业模式和生态</p>
</blockquote>
<p>O2O 领域已经有了非常多成功的案例：从最早的千团大战，到前年打车大战，再到餐饮 O2O……传统行业被撬动的同时，无数新的市场也在被发掘：</p>
<ul>
<li>金融： 蚂蚁金服、芝麻信用、京东白条</li>
<li>通信： 微信电话本，阿里通信</li>
<li>交通： 打车、租车、专车</li>
<li>地产： 二手房、租房</li>
<li>医疗、家电、教育、票务……</li>
</ul>
<p>当然，还有我们的在线旅游行业，BAT 纷纷入局，盛况空前。  </p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>历史总是现在与未来的明鉴，<strong>垂直领域互联网产品</strong>更是与行业的历史紧密相连。想要用互联网产品解决传统行业的问题，就得先了解这个行业的发展规律，看看这个行业都经历过怎样的变革。</p>
<h3 id="传统老大：旅行社"><a href="#传统老大：旅行社" class="headerlink" title="传统老大：旅行社"></a>传统老大：旅行社</h3><p>旅行社，一个耳熟能详的名字。在互联网的变革到来之前，旅游行业几乎就是旅行社的天下。</p>
<p>在行业术语里，旅行社被称为 <strong>TA：Travel Agency —— 旅游代理</strong>。<br>旅行社为你提供旅游信息，代理你办航班，定酒店，买门票，办签证，找导游。通过代理你的旅游消费行为，TA 从中获利。</p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.013.jpg" alt="img"></p>
<h3 id="第一轮革命：兴起的电商与-OTA"><a href="#第一轮革命：兴起的电商与-OTA" class="headerlink" title="第一轮革命：兴起的电商与 OTA"></a>第一轮革命：兴起的电商与 OTA</h3><p>1995 年，中国互联网沸腾元年，北京上海接入 Internet 节点。<br>1998 年，中国互联网电商元年，第一笔在线交易产生。<br>1999 年，马云的阿里巴巴创办。同年，旅游行业未来的两大巨头，<strong>携程</strong>、<strong>艺龙</strong> 双双出世。</p>
<p>携程、艺龙利用互联网的体验优势，迅速占领了 TA 的市场，它们被称作 <strong>OTA：Online Travel Agency</strong></p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.014.jpg" alt="img"></p>
<p>在他们诞生之初，其实都叫 XX旅行网。那为什么不说他们是做网站的，而说他们是做 TA 的呢？</p>
<p>这叫要引出本文涉及的第一个常见商业模式：</p>
<h4 id="Agency-模式"><a href="#Agency-模式" class="headerlink" title="Agency 模式"></a>Agency 模式</h4><p>Agency，即<strong>代理模式</strong>。通过代理用户的消费行为，代理商就可以靠佣金的方式从中获利。<br>举个例子：假设携程旅行网今天给某某酒店拉来了 100 个日间，那么这个酒店就要以 30元/日间 的方式给携程旅行网反多少的红利。</p>
<p><strong>佣金，说白了，就是中介费。</strong></p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.016.jpg" alt="img"></p>
<p>了解了 Agency 模式，我们再回过来看携程、艺龙：<br>虽然渠道改成了互联网，但其商业模式还是 TA 的那套玩法，它们其实是在和传统 TA 分同一块蛋糕。<br>还是咨询、酒店、机票、旅游团、旅游套餐，只是<strong>你们在线下玩，我去线上玩了</strong>，我有渠道优势。</p>
<h3 id="第二轮革命：比价搜索与去哪儿"><a href="#第二轮革命：比价搜索与去哪儿" class="headerlink" title="第二轮革命：比价搜索与去哪儿"></a>第二轮革命：比价搜索与去哪儿</h3><p>时光飞驰到 2005 年，单纯做线下已经满足不了很多传统 TA 们了，大家纷纷向携程、艺龙学习，进攻线上，转型 OTA 。</p>
<p>就在这样的格局下，<strong>去哪儿</strong> 横空出世，一下占据了半壁江山：</p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.021.jpg" alt="img"></p>
<p>去哪儿做了一件什么事呢，它把这些 OTA 的数据全都爬过来，做了一个<strong>比价平台</strong>。这样，用户就可以在去哪儿的网站上看看哪家 OTA 更便宜，然后用户就去消费哪家的服务。</p>
<p>所谓“比价平台”，本质上说，就是 <strong>Search Engine —— 搜索引擎</strong>。</p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.018.jpg" alt="img"></p>
<p>这个这个玩法一下就厉害了：<br><strong>去哪儿挡在了用户和所有 OTA 之间，OTA 还是做原来的事情，而去哪儿则拿下了用户找 OTA 的过程</strong>。同是搜索引擎的百度也是如此：百度自己并不生产内容，而是拿下了用户找内容的过程。</p>
<p>That’s why search engine awesome：因为用户在互联网的信息海洋上找信息太难了，所以用户必须要靠搜索引擎来解决这个痛点，而搜索引擎自己也就成为了渠道：</p>
<h4 id="Channel-模式"><a href="#Channel-模式" class="headerlink" title="Channel 模式"></a>Channel 模式</h4><p>Channel，即<strong>渠道模式</strong>。通过优化用户的体验路径，在用户和 B 方之前挡了一道，主要对 B 盈利。<br>最常见的对 B 盈利方式就是广告：<strong>Pay For Performance</strong></p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.019.jpg" alt="img"></p>
<p>简单看一眼携程和去哪儿的收入占比就可以发现：</p>
<ul>
<li>携程主要靠来自酒店、机票的佣金盈利</li>
<li>去哪儿则主要靠 PFP 广告盈利</li>
</ul>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.020.jpg" alt="img"></p>
<p>通过去哪儿的比价平台，小 OTA 开始有机会通过价格战和大 OTA 周旋。去哪儿在给予了小 OTA 机会的同时也造就了自己，这和 2003 年淘宝 C2C 的崛起，颇有异曲同工之意。</p>
<h3 id="第-2-5-轮革命：尴尬的淘宝旅行"><a href="#第-2-5-轮革命：尴尬的淘宝旅行" class="headerlink" title="第 2.5 轮革命：尴尬的淘宝旅行"></a>第 2.5 轮革命：尴尬的淘宝旅行</h3><p>为什么说淘宝旅行是 2.5 次革命呢，因为它想革，但没革上。<br>为什么没有革上呢？</p>
<p><strong>首先是切入时机太晚</strong></p>
<p>阿里其实 2010 年就开始做淘宝旅行了，一直划分在淘宝网下，由那时的淘宝北研（淘宝 UED 北京研发）团队负责，这个团队吸纳了大批雅虎中国的精英，技术水平相当高。<br>可是 2010 年才切入这个市场实在是太晚了，携程、去哪儿的口碑和用户习惯早都养成好几年了，没人会去你淘宝上搜航班酒店，你有大入口也没有用。</p>
<p><strong>二是资源倾斜不足</strong></p>
<p>2010 年还没有什么 <strong>互联网+</strong> 的概念，结合传统行业也还没有现在这么热，淘宝做旅游这事用了多大力气推很难说，反正我是没听过。<br>阿里同年的发展重心还是在其电商体系的完善上：<strong>淘宝商城</strong> 启用独立域名，其 B2C 的模式刚好弥补了淘宝 C2C 的问题，这货就是后来的<strong>天猫</strong>，我们可以比较一下两者在资源倾斜上的差异：</p>
<p> BU | 2008 | 2010 | 2011 | 2012 | 2013 | 2014 | 2015<br>—- | ————- | ————<br>天猫 | 淘宝商城  | 独立域名 | 分拆 | 更名天猫<br>天猫事业部（1/7）|<br>去啊 |  | 淘宝旅行 |  | | 航旅事业部（1/25）| 分拆<br>更名去啊 | 独立域名</p>
<p><strong>三是思路问题</strong></p>
<p>淘宝旅行想怎么玩呢，它实际上就是想用淘宝/天猫的思路去做在线旅行，其实背后还是淘宝卖家和天猫卖家，只不过这次的商户换成 OTA 入驻了，然后大家开开心心像卖衣服一样去卖旅行产品。</p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.023.jpg" alt="img"></p>
<p>听上去很美，不但利用了阿里系的大量资源，还直接复刻了淘宝/天猫的牛逼模式 —— 平台模式</p>
<h4 id="Platform-模式"><a href="#Platform-模式" class="headerlink" title="Platform 模式"></a>Platform 模式</h4><p>Platform，即<strong>平台模式</strong>，可以说是当今最叼的商业模式了，它相当于构建了一个完整的生态、市场环境，在这里整合买卖双方的资源。通过维护市场秩序、制定市场规则，让市场活跃，从而<strong>赚取场子费</strong>。</p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.026.jpg" alt="img"></p>
<p>想想看，每一笔交易都在你的地盘上发生，只要市场一直活跃，你就可以在其中<strong>双边、多边盈利</strong>。什么竞价排名、广告平台、VIP 特权，盈利模式太丰富了</p>
<p>美梦做完了，回到淘宝旅行来。做平台是每个产品的梦想，肯定是对的。那么问题出在哪呢？</p>
<p><strong>太不垂直了！</strong> 旅游行业，极度要求信誉：去哪儿对接的都是 B 类商家（OTA，品牌连锁酒店，直销等），从根本上就保证了产品体验。淘宝旅行的产品则充斥着大量的小旅行社、个人之类的小卖家，严重影响购买体验。你能想象预定一间酒店发现下面十几二十页的卖家，选完卖家又要跟人在旺旺上扯半个小时么？价格便宜作为唯一的优势，是以严重牺牲产品购买体验为代价的，极为得不偿失。更何况，旅游产品的受众大部分还是消费能力较强的人群，更是看重商家/产品质量而不是价格了。</p>
<h3 id="第三轮革命：Now"><a href="#第三轮革命：Now" class="headerlink" title="第三轮革命：Now"></a>第三轮革命：Now</h3><p>OK，经过这么一番折腾，第三次变革就来了。<br>BAT 纷纷介入，行业进入了传说中的 BATX 格局：</p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.028.jpg" alt="img"></p>
<p>阿里最近动作频频，力推去啊不说，更是收购线下酒店软件石基，配合蚂蚁金服期下芝麻信用开展“酒店信用住”等业务<br>百度早早投资去哪儿，两个搜索引擎起家的公司风格一脉相承。同时，百度也悄悄发布了百度旅行这样的试水产品<br>腾讯入股艺龙，同程网等，也在尝试 QQ 旅游等产品</p>
<p>Update：不过，就在 2015.5 左右，携程宣布收购艺龙，非常戏剧性的局面啊……</p>
<p>为什么都要介入呢？<br>一是互联网结合传统行业的大潮到来，大家都发现旅游行业是一个金矿，市场其实特别大……<br>二是这个领域确实还有很多可以突破的商业模式存在，很多细分领域都开始有创业公司起来，整个行业的生态也越来越丰富：</p>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.029.jpg" alt="img"></p>
<p>这种时候，BAT 这样的土豪公司就想进来收网了 —— 砸钱也得砸出个平台来！<br>所以，这一轮游戏一定能看到一次大洗牌（艺龙第一个就阵亡了）</p>
<p>那么，这轮革命怎么演变呢？</p>
<p><strong>一是模式融合</strong>，以前做 OTA 的做 OTA，做渠道的做渠道，尝试做平台的做平台。现在，大家都知道平台模式可能是更好的形态，纷纷开始进化了。</p>
<ul>
<li>都做 OTA，拿下各种牛逼直营，最典型的就是航班</li>
<li>都做平台，尤其是质量相对比较高的 B2C 平台。然后尝试可能的 C2C 产品形态 （去啊的客栈是一个很好的尝试）</li>
</ul>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.030.jpg" alt="img"></p>
<p><strong>二是思路进化</strong></p>
<ul>
<li>从单一的购买/渠道业务转向服务平台。融合周边服务，拉上细分领域，外围行业一起玩</li>
<li>强调用户体验与用户留存，强调<strong>一站式服务</strong>、<strong>个性化服务</strong> 等更极致的产品形态</li>
</ul>
<p><img src="/img/in-post/post-alitrip-pd/post-alitrip-pd.031.jpg" alt="img"></p>
<p>而这些演变，正是 <strong>阿里旅行 · 去啊</strong> 致力去做到的。从大版本 5.0 开始，淘宝旅行将 <strong>洗心革面</strong>，去追求一个更极致，更垂直，体验更优秀的产品形态。</p>
<p>让我们一起见证去啊的成长，与在线旅游行业的变革吧！</p>
<hr>
<p><em>本篇完。</em></p>
<blockquote>
<p>本文作者系前「阿里旅行 · 去啊」前端实习生，本文系业余时间学习之作。<br>如有任何知识产权、版权问题或理论错误，还请指正。<br>转载请注明原作者及以上信息。</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/25/2015-05-25-js-module-loader/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lin">
      <meta itemprop="description" content="jfds ifd ewrerw iok.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnson's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/05/25/2015-05-25-js-module-loader/" class="post-title-link" itemprop="url">JavaScript Module Loader</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2015-05-25 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-25T00:00:00+08:00">2015-05-25</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-04 11:56:32" itemprop="dateModified" datetime="2019-07-04T11:56:32+08:00">2019-07-04</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Foreword"><a href="#Foreword" class="headerlink" title="Foreword"></a>Foreword</h2><blockquote>
<p>Here comes Module!</p>
</blockquote>
<p>随着网站逐渐变成「互联网应用程序」，嵌入网页的 JavaScript 代码越来越庞大，越来越复杂。网页越来越像桌面程序，需要一个团队分工协作、进度管理、单元测试……我们不得不使用软件工程的方法，来管理网页的业务逻辑。</p>
<p>于是，JavaScript 的模块化成为迫切需求。在 ES6 Module 来临之前，JavaScript 社区提供了强大支持，尝试在现有的运行环境下，实现模块的效果。</p>
<h2 id="CommonJS-amp-Node"><a href="#CommonJS-amp-Node" class="headerlink" title="CommonJS &amp; Node"></a>CommonJS &amp; Node</h2><blockquote>
<p>Javascript: not just for browsers any more! —— CommonJS Slogen</p>
</blockquote>
<p>前端模块化的事实标准之一，2009 年 8 月，<a href="http://wiki.commonjs.org/wiki/CommonJS" target="_blank" rel="noopener">CommonJS</a> 诞生。</p>
<p>CommonJS 本质上只是一套规范（API 定义），而 Node.js 采用并实现了部分规范，CommonJS Module 的写法也因此广泛流行。</p>
<p>让我们看看 Node 中的实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 由于 Node 原生支持模块的作用域，并不需要额外的 wrapper</span></span><br><span class="line"><span class="comment">// "as though the module was wrapped in a function"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>)  <span class="comment">// 加载模块（同步加载）</span></span><br><span class="line">a.doSomething()         <span class="comment">// 等上一句执行完才会执行</span></span><br><span class="line"></span><br><span class="line">exports.b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// 暴露 b 函数接口</span></span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>exports</code>是一个内置对象，就像<code>require</code>是一个内置加载函数一样。如果你希望直接赋值一个完整的对象或者构造函数，覆写<code>module.exports</code>就可以了。</p>
<p>CommonJS 前身叫 ServerJS ，<strong>后来希望能更加 COMMON，成为通吃各种环境的模块规范，改名为 CommonJS</strong> 。CommonJS 最初只专注于 Server-side 而非浏览器环境，因此它采用了同步加载的机制，这对服务器环境（硬盘 I/O 速度）不是问题，而对浏览器环境（网速）来说并不合适。</p>
<p>因此，各种适用于浏览器环境的模块框架与标准逐个诞生，他们的共同点是：</p>
<ul>
<li>采用异步加载（预先加载所有依赖的模块后回调执行，符合浏览器的网络环境）</li>
<li>虽然代码风格不同，但其实都可以看作 CommonJS Modules 语法的变体。</li>
<li>都在向着 <strong>COMMON</strong> 的方向进化：<strong>兼容不同风格，兼容浏览器和服务器两种环境</strong></li>
</ul>
<p>本文接下来要讨论的典例是：</p>
<ul>
<li>RequireJS &amp; AMD（异步加载，预执行，依赖前置。默认推荐 AMD 写法）</li>
<li>SeaJS &amp; CMD（异步加载，懒执行，依赖就近，默认推荐 CommonJS 写法）</li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><!--<h2 id="history"> History </h2>-->

<blockquote>
<p>此段落参考自玉伯的 <a href="https://github.com/seajs/seajs/issues/588" target="_blank" rel="noopener">前端模块化开发那点历史</a></p>
</blockquote>
<p>09-10 年间，CommonJS（那时还叫 ServerJS） 社区推出 <a href="http://wiki.commonjs.org/wiki/Modules" target="_blank" rel="noopener">Modules/1.0</a> 规范，并且在 Node.js 等环境下取得了很不错的实践。</p>
<p>09年下半年这帮充满干劲的小伙子们想把 ServerJS 的成功经验进一步推广到浏览器端，于是将社区改名叫 CommonJS，同时激烈争论 Modules 的下一版规范。分歧和冲突由此诞生，逐步形成了三大流派：</p>
<ol>
<li><strong>Modules/1.x</strong> 流派。这个观点觉得 1.x 规范已经够用，只要移植到浏览器端就好。要做的是新增 <a href="http://wiki.commonjs.org/wiki/Modules/Transport" target="_blank" rel="noopener">Modules/Transport</a> 规范，即在浏览器上运行前，先通过转换工具将模块转换为符合 Transport 规范的代码。主流代表是服务端的开发人员。现在值得关注的有两个实现：越来越火的 component 和走在前沿的 es6 module transpiler。</li>
<li><strong>Modules/Async</strong> 流派。这个观点觉得浏览器有自身的特征，不应该直接用 Modules/1.x 规范。这个观点下的典型代表是 <a href="http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition" target="_blank" rel="noopener">AMD</a> 规范及其实现 <a href="http://requirejs.org/" target="_blank" rel="noopener">RequireJS</a>。这个稍后再细说。</li>
<li><strong>Modules/2.0</strong> 流派。这个观点觉得浏览器有自身的特征，不应该直接用 Modules/1.x 规范，但应该尽可能与 Modules/1.x 规范保持一致。这个观点下的典型代表是 BravoJS 和 FlyScript 的作者。BravoJS 作者对 CommonJS 的社区的贡献很大，这份 Modules/2.0-draft 规范花了很多心思。FlyScript 的作者提出了 Modules/Wrappings 规范，这规范是 CMD 规范的前身。可惜的是 BravoJS 太学院派，FlyScript 后来做了自我阉割，将整个网站（flyscript.org）下线了。这个观点在本文中的典型代表就是 SeaJS 和 CMD 了</li>
</ol>
<p>补一嘴：阿里 KISSY 的 KMD 其实跟 AMD 非常类似，只是用 <code>add</code>和<code>use</code> 两个源自于 YUI Modules 的函数名替换了 <code>define</code> 和 <code>require</code> ，但其原理更接近 RequireJS ，与 YUI Modules 的 <code>Y</code> 沙箱 Attach 机制并不相同</p>
<h2 id="RequireJS-amp-AMD"><a href="#RequireJS-amp-AMD" class="headerlink" title="RequireJS &amp; AMD"></a>RequireJS &amp; AMD</h2><p><a href="http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition" target="_blank" rel="noopener">AMD (Async Module Definition)</a> 是 RequireJS 在推广过程中对模块定义的规范化产出。</p>
<blockquote>
<p>RequireJS is a JavaScript file and module loader. It is optimized for in-browser use, but it can be used in other JavaScript environments</p>
</blockquote>
<p>RequireJS 主要解决的还是 CommonJS 同步加载脚本不适合浏览器 这个问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CommonJS</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Employee = <span class="built_in">require</span>(<span class="string">"types/Employee"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Programmer</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">Programmer.prototype = <span class="keyword">new</span> Employee();</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果 require call 是异步的，那么肯定 error</span></span><br><span class="line"><span class="comment">//因为在执行这句前 Employee 模块肯定来不及加载进来</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>As the comment indicates above, if require() is async, this code will not work. However, loading scripts synchronously in the browser kills performance. So, what to do?</p>
</blockquote>
<p>所以我们需要 <strong>Function Wrapping</strong> 来获取依赖并且提前通过 script tag 提前加载进来</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//AMD Wrapper</span></span><br><span class="line"></span><br><span class="line">define(</span><br><span class="line">    [types/Employee],    <span class="comment">//依赖</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">Employee</span>)</span>&#123;  <span class="comment">//这个回调会在所有依赖都被加载后才执行</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">Programmer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">//do something</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        Programmer.prototype = <span class="keyword">new</span> Employee();</span><br><span class="line">        <span class="keyword">return</span> Programmer;  <span class="comment">//return Constructor</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>当依赖模块非常多时，这种<strong>依赖前置</strong>的写法会显得有点奇怪，所以 AMD 给了一个语法糖， <strong>simplified CommonJS wrapping</strong>，借鉴了 CommonJS 的 require 就近风格，也更方便对 CommonJS 模块的兼容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dependency1 = <span class="built_in">require</span>(<span class="string">'dependency1'</span>),</span><br><span class="line">        dependency2 = <span class="built_in">require</span>(<span class="string">'dependency2'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>The AMD loader will parse out the <code>require(&#39;&#39;)</code> calls by using <code>Function.prototype.toString()</code>, then internally convert the above define call into this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">'require'</span>, <span class="string">'dependency1'</span>, <span class="string">'dependency2'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dependency1 = <span class="built_in">require</span>(<span class="string">'dependency1'</span>),</span><br><span class="line">        dependency2 = <span class="built_in">require</span>(<span class="string">'dependency2'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>出于<code>Function.prototype.toString()</code>兼容性和性能的考虑，最好的做法还是做一次 <strong>optimized build</strong></p>
<p>AMD 和 CommonJS 的核心争议如下：</p>
<h3 id="1-执行时机"><a href="#1-执行时机" class="headerlink" title="1. 执行时机"></a>1. <strong>执行时机</strong></h3><p>Modules/1.0:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"./a"</span>) <span class="comment">// 执行到此时，a.js 才同步下载并执行</span></span><br></pre></td></tr></table></figure>

<p>AMD: （使用 require 的语法糖时）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">"require"</span>],<span class="function"><span class="keyword">function</span>(<span class="params">require</span>))</span>&#123;</span><br><span class="line">    <span class="comment">// 在这里，a.js 已经下载并且执行好了</span></span><br><span class="line">    <span class="comment">// 使用 require() 并不是 AMD 的推荐写法</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"./a"</span>) <span class="comment">// 此处仅仅是取模块 a 的 exports</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>AMD 里提前下载 a.js 是出于对浏览器环境的考虑，只能采取异步下载，这个社区都认可（Sea.js 也是这么做的）</p>
<p>但是 AMD 的执行是 Early Executing，而 Modules/1.0 是第一次 require 时才执行。这个差异很多人不能接受，包括持 Modules/2.0 观点的人也不能接受。</p>
<h3 id="2-书写风格"><a href="#2-书写风格" class="headerlink" title="2. 书写风格"></a>2. <strong>书写风格</strong></h3><p>AMD 推荐的风格并不使用<code>require</code>，而是通过参数传入，破坏了<strong>依赖就近</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>],<span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 提前申明了并初始化了所有模块</span></span><br><span class="line"></span><br><span class="line">    <span class="literal">true</span> || b.foo(); <span class="comment">//即便根本没用到模块 b，但 b 还是提前执行了。</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>不过，在笔者看来，风格喜好因人而异，主要还是<strong>预执行</strong>和<strong>懒执行</strong>的差异。</p>
<p>另外，require 2.0 也开始思考异步处理<strong>软依赖</strong>（区别于一定需要的<strong>硬依赖</strong>）的问题，提出了这样的方案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数体内：</span></span><br><span class="line"><span class="keyword">if</span>(status)&#123;</span><br><span class="line">    <span class="keyword">async</span>([<span class="string">'a'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">        a.doSomething()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SeaJS-amp-CMD"><a href="#SeaJS-amp-CMD" class="headerlink" title="SeaJS &amp; CMD"></a>SeaJS &amp; CMD</h2><p>CMD (Common Module Definition) 是 <a href="http://seajs.org/docs/" target="_blank" rel="noopener">SeaJS</a> 在推广过程中对模块定义的规范化产出，是 Modules/2.0 流派的支持者，因此 SeaJS 的模块写法尽可能与 Modules/1.x 规范保持一致。</p>
<p>不过目前国外的该流派都死得差不多了，RequireJS 目前成为浏览器端模块的事实标准，国内最有名气的就是玉伯的 Sea.js ，不过对国际的推广力度不够。</p>
<ul>
<li>CMD Specification<ul>
<li><a href="https://github.com/cmdjs/specification/blob/master/draft/module.md" target="_blank" rel="noopener">English (CMDJS-repo)</a></li>
<li><a href="https://github.com/seajs/seajs/issues/242" target="_blank" rel="noopener">Chinese (SeaJS-repo)</a></li>
</ul>
</li>
</ul>
<p>CMD 主要有 define, factory, require, export 这么几个东西</p>
<ul>
<li>define <code>define(id?, deps?, factory)</code></li>
<li>factory <code>factory(require, exports, module)</code></li>
<li>require <code>require(id)</code></li>
<li>exports <code>Object</code></li>
</ul>
<p>CMD 推荐的 Code Style 是使用 CommonJS 风格的 <code>require</code>：</p>
<ul>
<li>这个 require 实际上是一个全局函数，用于加载模块，这里实际就是传入而已</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取模块 a 的接口</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</span><br><span class="line">    <span class="comment">// 调用模块 a 的方法</span></span><br><span class="line">    a.doSomething();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对外提供 foo 属性</span></span><br><span class="line">    exports.foo = <span class="string">'bar'</span>;</span><br><span class="line">    <span class="comment">// 对外提供 doSomething 方法</span></span><br><span class="line">    exports.doSomething = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>但是你也可以使用 AMD 风格，或者使用 return 来进行模块暴露</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">'hello'</span>, [<span class="string">'jquery'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 模块代码...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 直接通过 return 暴露接口</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        foo: <span class="string">'bar'</span>,</span><br><span class="line">        doSomething: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Sea.js 借鉴了 RequireJS 的不少东西，比如将 FlyScript 中的 module.declare 改名为 define 等。Sea.js 更多地来自 Modules/2.0 的观点，但尽可能去掉了学院派的东西，加入了不少实战派的理念。</p>
<h2 id="AMD-vs-CMD"><a href="#AMD-vs-CMD" class="headerlink" title="AMD vs CMD"></a>AMD vs CMD</h2><p><strong>虽然两者目前都兼容各种风格，但其底层原理并不相同，从其分别推荐的写法就可以看出两者背后原理的不同：</strong></p>
<ol>
<li>对于依赖的模块，AMD 是<strong>提前执行</strong>，CMD 是<strong>懒执行</strong>。（都是先加载）</li>
</ol>
<ul>
<li>CMD 推崇<strong>依赖就近</strong>，AMD 推崇<strong>依赖前置</strong>。   </li>
</ul>
<p>看代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AMD 默认推荐</span></span><br><span class="line"></span><br><span class="line">define([<span class="string">'./a'</span>, <span class="string">'./b'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;  <span class="comment">// 依赖前置，提前执行</span></span><br><span class="line"></span><br><span class="line">    a.doSomething()</span><br><span class="line">    b.doSomething()</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CMD</span></span><br><span class="line"></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>)</span><br><span class="line">    a.doSomething()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">'./b'</span>) <span class="comment">// 依赖就近，延迟执行</span></span><br><span class="line">    b.doSomething()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="WebPack"><a href="#WebPack" class="headerlink" title="WebPack"></a>WebPack</h2><blockquote>
<p>working…</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Johnson Lin">
            
              <p class="site-author-name" itemprop="name">Johnson Lin</p>
              <div class="site-description motion-element" itemprop="description">jfds ifd ewrerw iok.</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">23</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/yourname" title="GitHub &rarr; https://github.com/yourname" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:yourname@gmail.com" title="E-Mail &rarr; mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Johnson Lin</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
